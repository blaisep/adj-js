<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <title>Adj Framework - User Guide</title>
  <style type="text/css">
td {
  padding: 1.0ex;
}
@media print {
  tr, td, img {
    page-break-inside: avoid;
  }
}
h1 {
  font-size: 130%;
}
h2 {
  font-size: 120%;
}
h3 {
  font-size: 110%;
}
h4, h5, h6 {
  font-size: 105%;
}
h1,h2,h3,h4,h5,h6 {
  page-break-after: avoid;
}
 .subtle-link {
  color: black;
}
 .hilite {
  background-color: #FFFF80;
}
 .example-code {
  font-weight: bolder;
  background-color: #FFFF80;
}
 .example-result {
  font-weight: bolder;
  background-color: #D0FFFF;
}
 .deemphasize-code {
  color: #888;
  font-size: smaller;
}
 .deemphasize {
  font-size: smaller;
}
 .emphasize {
  font-weight: bolder;
}
 .todo {
  color: #448844;
  font-size: smaller;
}
 .product-name {
  font-family: sans-serif;
}
 .example-listing {
  white-space: pre-wrap;
  font-size: smaller;
}
  </style>
</head>

<body>
<h1>Adj Framework</h1>

<p class="deemphasize">Note: This user guide's SVG images show in modern
browsers, i.e. Firefox, Chrome, Safari, Internet Explorer 9 and newer. Older
versions Internet Explorer, 8 and earlier, show the <code>alt</code> tag text
of those <code>img</code> elements instead. Internet Explorer users will be <a
href="#L2433">better off</a> with Internet Explorer 10 anyway.</p>

<div class="toc">
<ul>
  <li><a href="#L7142">1. User Guide</a> 
    <ul>
      <li><a href="#L4238">1.1. Modified BSD License</a></li>
      <li><a href="#L4276">1.2. Contributors</a></li>
      <li><a href="#L4291">1.3. Contact</a></li>
      <li><a href="#L8534">1.4. Repository</a></li>
      <li><a href="#L38358">1.5. For The Impatient</a></li>
      <li><a href="#L26102">1.6. Introduction</a></li>
      <li><a href="#L25888">1.7. Purpose</a></li>
      <li><a href="#L25990">1.8. Implementation Rationale</a></li>
      <li><a href="#L7144">1.9. Modifying SVG</a> 
        <ul>
          <li><a href="#L378">1.9.1. Applying Transformations</a></li>
          <li><a href="#L443">1.9.2. Storing Away Authoring Coordinates</a></li>
        </ul>
      </li>
      <li><a href="#L7202">1.10. Command Overview</a></li>
      <li><a href="#L7353">1.11. Command Options</a> 
        <ul>
          <li><a href="#L7357">1.11.1. Command horizontalList Options</a></li>
          <li><a href="#L7545">1.11.2. Command verticalList Options</a></li>
          <li><a href="#L12321">1.11.3. Command frameForParent Options</a></li>
          <li><a href="#L2589">1.11.4. Command textBreaks Options</a></li>
          <li><a href="#L1740">1.11.5. Command connection Options</a></li>
          <li><a href="#L8701">1.11.6. Command rider Options</a></li>
          <li><a href="#L9691">1.11.7. Command circleForParent Options</a></li>
          <li><a href="#L9743">1.11.8. Command ellipseForParent Options</a></li>
          <li><a href="#L20521">1.11.9. Command circularList Options</a></li>
          <li><a href="#L8469">1.11.10. Command verticalTree Options</a></li>
          <li><a href="#L1773">1.11.11. Command horizontalTree Options</a></li>
          <li><a href="#L1796">1.11.12. Command vine Options</a> 
            <ul>
              <li><a href="#L2057">1.11.12.1. Caveat Regarding <code>-</code>
                Minus Sign</a></li>
            </ul>
          </li>
          <li><a href="#L2184">1.11.13. Command floater Options</a></li>
          <li><a href="#L2299">1.11.14. Command fit Options</a></li>
        </ul>
      </li>
      <li><a href="#L7600">1.12. Auxiliary Commands</a> 
        <ul>
          <li><a href="#L7602">1.12.1. Option explain</a></li>
          <li><a href="#L2422">1.12.2. Command explain</a></li>
          <li><a href="#L7627">1.12.3. Command relativate</a></li>
        </ul>
      </li>
      <li><a href="#L1780">1.13. Referencing By Identifier Attribute</a> 
        <ul>
          <li><a href="#L5174">1.13.1. Need</a></li>
          <li><a href="#L1807">1.13.2. Attribute adj:id</a></li>
          <li><a href="#L1842">1.13.3. Function
          Adj.getElementByIdNearby</a></li>
          <li><a href="#L1875">1.13.4. Different Search Strategies</a></li>
        </ul>
      </li>
      <li><a href="#L2629">1.14. Substitution Of Variables</a></li>
      <li><a href="#L2572">1.15. Issuing Commands Via adj: Attributes Instead
        Of Via adj: Elements</a></li>
      <li><a href="#L2579">1.16. Command Combinations</a></li>
      <li><a href="#L1888">1.17. Complete Authoring Workflow</a></li>
      <li><a href="#L6329">1.18. Invocation</a> 
        <ul>
          <li><a href="#L6331">1.18.1. Explicit Invocation</a></li>
          <li><a href="#L6345">1.18.2. Implicit Invocation</a></li>
          <li><a href="#L10156">1.18.3. No Invocation – If Saving Processed
            Document</a></li>
        </ul>
      </li>
      <li><a href="#L86788">1.19. More Details</a> 
        <ul>
          <li><a href="#L123304">1.19.1. Using SVG Group Element g</a></li>
          <li><a href="#L123314">1.19.2. Overwriting Preexisting Transform
            Attributes</a></li>
          <li><a href="#L123334">1.19.3. Transforming An SVG Path</a> 
            <ul>
              <li><a href="#L123341">1.19.3.1. Changing Points</a></li>
              <li><a href="#L6338">1.19.3.2. Storing Away Authoring
                Coordinates</a></li>
              <li><a href="#L123364">1.19.3.3. In connection Arcs Are Not
                Supported</a></li>
            </ul>
          </li>
          <li><a href="#L4599">1.19.4. Exception Handling</a></li>
          <li><a href="#L2915">1.19.5. Bad Command Handling</a></li>
        </ul>
      </li>
      <li><a href="#L4606">1.20. Helpful Hints</a> 
        <ul>
          <li><a href="#L4608">1.20.1. Defining An SVG rect Element</a></li>
          <li><a href="#L4638">1.20.2. Considerations For Nesting</a></li>
        </ul>
      </li>
      <li><a href="#L2289">1.21. Extending SVG With The Adj Namespace</a></li>
      <li><a href="#L6360">1.22. Alternate Syntax – JavaScript Instead Of
        XML</a></li>
      <li><a href="#L123374">1.23. Implementation Details</a> 
        <ul>
          <li><a href="#L2440">1.23.1. Need Driven</a></li>
          <li><a href="#L2469">1.23.2. Sizing From Small Parts To Whole
            Image</a></li>
          <li><a href="#L123378">1.23.3. Execution Path</a></li>
          <li><a href="#L3845">1.23.4. More Implementation Details</a></li>
        </ul>
      </li>
      <li><a href="#L3983">1.24. Extending Adj With Your Own Commands And
        Algorithms</a></li>
      <li><a href="#L2357">1.25. Automated Testing</a></li>
      <li><a href="#L2374">1.26. Compatibility Issues</a> 
        <ul>
          <li><a href="#L2433">1.26.1. Internet Explorer 8 And Earlier</a></li>
          <li><a href="#L2437">1.26.2. Internet Explorer 9</a></li>
          <li><a href="#L2480">1.26.3. Internet Explorer 10</a></li>
        </ul>
      </li>
      <li><a href="#L1688">1.27. Example Files</a> 
        <ul>
          <li><a href="#L5397">1.27.1. Example File 001 Source Code</a></li>
          <li><a href="#L5412">1.27.2. Example File 002</a></li>
          <li><a href="#L1730">1.27.3. Example File 003</a></li>
          <li><a href="#L5916">1.27.4. Example File 004</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
</div>

<h2 id="L7142">1. User Guide</h2>

<h3 id="L4238">1.1. Modified BSD License</h3>
<pre class="deemphasize">// Copyright (c) 2002-2013, Nirvana Research
// All rights reserved.
//
// Redistribution and use in source and binary forms, with or without
// modification, are permitted provided that the following conditions are met:
//     * Redistributions of source code must retain the above copyright
//       notice, this list of conditions and the following disclaimer.
//     * Redistributions in binary form must reproduce the above copyright
//       notice, this list of conditions and the following disclaimer in the
//       documentation and/or other materials provided with the distribution.
//     * Neither the name of the copyright holder nor the names of
//       contributors may be used to endorse or promote products derived from
//       this software without specific prior written permission.
//
// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDER AND CONTRIBUTORS "AS IS" AND
// ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
// WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
// DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER BE LIABLE FOR ANY DIRECT,
// INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
// BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
// EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</pre>

<h3 id="L4276">1.2. Contributors</h3>
<pre class="deemphasize">// Idea and first implementation - Leo Baschy &lt;srguiwiz12 AT nrvr DOT com&gt;
// Contributor - Hans Baschy</pre>

<h3 id="L4291">1.3. Contact</h3>
<pre class="deemphasize">// Comments to: &lt;adj.feedback AT nrvr DOT com&gt;</pre>

<h3 id="L8534">1.4. Repository</h3>
<pre class="deemphasize">// Public repository - <a href="https://github.com/srguiwiz/adj-js">https://github.com/srguiwiz/adj-js</a></pre>

<h3 id="L38358">1.5. For The Impatient</h3>

<p>If you have seen a demo, or attended a class, and quickly want to get
started on your own, these three points may be for you:</p>
<ul>
  <li>a discussion of <a href="#L6329">Invocation</a></li>
  <li>a <a href="#L6319">Complete Authoring Workflow</a></li>
  <li>a reminder to get a copy of the essential <code><span
    class="emphasize">adj.js</span></code> file from <a
    href="https://github.com/srguiwiz/adj-js">this project's repository</a></li>
</ul>

<h3 id="L26102">1.6. Introduction<a></a><a></a></h3>

<p>Adj commands modify SVG.</p>

<p>One significant feature is "relative constraints".</p>

<p>It is possible to execute all Adj modification of SVG on the SVG document
author's workstation, then save the document and let other users view it.</p>

<p>Alternatively, it is possible to allow execution of Adj modification of SVG
when a user is viewing, possibly interacting with an SVG document.</p>

<p>As implemented, it builds on SVG and contemporary browsers.</p>

<h3 id="L25888">1.7. Purpose</h3>

<p>The original purpose of the Adj framework has been to facilitate creation
and long-term maintenance of system diagrams.</p>

<p>Adj has been designed specifically for diagrams of large complexity.</p>

<p>Because of its general nature, other uses may be possible.</p>

<h3 id="L25990">1.8. Implementation Rationale</h3>

<p>Other attempts had been made at enhancing drawing tools, e.g. an Adobe
Illustrator plug-in. Still there were good reasons to implement Adj.</p>

<p>Adj leverages several existing technologies:</p>
<ul>
  <li>SVG viewing is commonly possible with contemporary browsers: Firefox,
    Chrome, Safari, and Internet Explorer since version 9</li>
  <li>SVG being XML can be generated and manipulated in automated ways, i.e.
    SVG documents can be created as output of a broad variety of scripts</li>
  <li>JavaScript manipulation of SVG, while not perfect, has been defined
    reasonably well and has become sufficiently consistently implemented across
    browsers</li>
  <li>as implemented, Adj uses widely available browser implementations of
    JavaScript manipulation of SVG</li>
</ul>

<p>Additional highlights:</p>
<ul>
  <li>containment can be nested as many levels deep as needed, with Adj applied
    at almost any and all levels, allowing diagrams of large complexity</li>
  <li>a viewing user does not need to have Adj, at least not for basic
    functionality</li>
</ul>

<p>SVG WYSIWYG editors at the time Adj has been developed have been found to be
suboptimal in reliability and ease of use, and have not effectively supported
JavaScript manipulation of SVG.</p>

<h3 id="L7144">1.9. Modifying SVG</h3>

<h4 id="L378">1.9.1. Applying Transformations</h4>

<p>Adj commands <a href="#L123314">modify</a> SVG:</p>

<table border="1">
  <tbody>
    <tr>
      <td>source</td>
      <td><pre class="example-listing">&lt;svg xmlns="http://www.w3.org/2000/svg" <span class="example-code">xmlns:adj="http://www.nrvr.com/2012/adj"</span>&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;
  &lt;g&gt;
    <span class="example-code">&lt;adj:verticalList gap="5"/&gt;</span>
    &lt;rect width="45" height="30" fill="#000"/&gt;
    &lt;rect width="40" height="25" fill="#444"/&gt;
    &lt;rect width="35" height="20" fill="#888"/&gt;
  &lt;/g&gt;
&lt;/svg&gt;</pre>
      </td>
    </tr>
    <tr>
      <td>image before being processed by Adj</td>
      <td><img alt="example"
      src="adj-ex-001-verticalList-before.svg"></img></td>
    </tr>
    <tr>
      <td>becomes</td>
      <td><pre class="example-listing">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;
  &lt;g&gt;
    &lt;adj:verticalList gap="5"/&gt;
    &lt;rect width="45" height="30" fill="#000"<span class="example-result"> transform="translate(5,5)"</span>/&gt;
    &lt;rect width="40" height="25" fill="#444"<span class="example-result"> transform="translate(5,40)"</span>/&gt;
    &lt;rect width="35" height="20" fill="#888"<span class="example-result"> transform="translate(5,70)"</span>/&gt;
  &lt;/g&gt;
&lt;/svg&gt;</pre>
      </td>
    </tr>
    <tr>
      <td>image after <a href="adj-ex-001-verticalList-adj.svg"
        class="subtle-link">processing</a> by Adj</td>
      <td><img alt="example" src="adj-ex-001-verticalList-after.svg"></img></td>
    </tr>
  </tbody>
</table>

<h4 id="L443">1.9.2. Storing Away Authoring Coordinates</h4>

<p>With <a href="#L123334">some</a> modifications, authoring coordinates are
stored away for reuse by authors and algorithms:</p>

<table border="1">
  <tbody>
    <tr>
      <td>source</td>
      <td><pre class="example-listing">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;
  &lt;rect adj:id="one" x="5" y="5" width="40" height="30" fill="#444"/&gt;
  &lt;rect adj:id="other" x="145" y="35" width="40" height="30" fill="#aaa"/&gt;
  &lt;path <span class="example-code">d="M5,100 q40,10 80,0 t80,0"</span> stroke="#777" stroke-width="2" fill="none"&gt;
    <span class="example-code">&lt;adj:connection from="one % 1, 0.5" to="other % 0, 0.5"/&gt;</span>
  &lt;/path&gt;
&lt;/svg&gt;</pre>
      </td>
    </tr>
    <tr>
      <td>becomes</td>
      <td><pre class="example-listing">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;
  &lt;rect adj:id="one" x="5" y="5" width="40" height="30" fill="#444"/&gt;
  &lt;rect adj:id="other" x="145" y="35" width="40" height="30" fill="#aaa"/&gt;
  &lt;path <span class="example-result">d="M45,20q22.127,17.078 50,15t50,15"</span> stroke="#777" stroke-width="2" fill="none"<span class="example-result"> adj:d="M5,100 q40,10 80,0 t80,0"</span>&gt;
    &lt;adj:connection from="one % 1, 0.5" to="other % 0, 0.5"/&gt;
  &lt;/path&gt;
&lt;/svg&gt;</pre>
      </td>
    </tr>
  </tbody>
</table>

<h3 id="L7202">1.10. Command Overview</h3>

<p>The main commands shown by simple examples:</p>

<table border="1">
  <tbody>
    <tr>
      <td><img alt="example" src="adj-ex-002-verticalList.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:<a href="#L7545">verticalList</a> gap="5"/&gt;</span>
    &lt;rect width="45" height="30" fill="#000"/&gt;
    &lt;rect width="40" height="25" fill="#444"/&gt;
    &lt;rect width="35" height="20" fill="#888"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-003-horizontalList.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:<a href="#L7357">horizontalList</a> gap="5"/&gt;</span>
    &lt;rect width="45" height="30" fill="#000"/&gt;
    &lt;rect width="40" height="25" fill="#444"/&gt;
    &lt;rect width="35" height="20" fill="#888"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-004-frameForParent.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;adj:horizontalList gap="5"/&gt;
    &lt;rect fill="none" stroke="black" stroke-width="2" width="0" height="0"&gt;
      <span class="example-code">&lt;adj:<a href="#L12321">frameForParent</a> inset="1"/&gt;</span>
    &lt;/rect&gt;
    &lt;rect width="45" height="30" fill="#000"/&gt;
    &lt;rect width="40" height="25" fill="#444"/&gt;
    &lt;rect width="35" height="20" fill="#888"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-005-textBreaks.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;g font-size="12"&gt;
    <span class="example-code">&lt;adj:<a href="#L2589">textBreaks</a> wordBreaks="true"/&gt;</span>
    <span class="example-code">&lt;adj:horizontalList maxWidth="170" gap="5" centerGap="3" topGap="10" leftGap="10"/&gt;</span>
    &lt;text&gt;This is a sentence of text that will wrap.&lt;/text&gt;
    &lt;text&gt;Here is more.&lt;/text&gt;
    &lt;rect fill="none" stroke="lightgray" stroke-width="2" width="0" height="0"&gt;
      &lt;adj:frameForParent inset="1"/&gt;
    &lt;/rect&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-006-connection.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;rect adj:id="one" x="5" y="5" width="40" height="30" fill="#444"/&gt;
  &lt;rect adj:id="other" x="145" y="35" width="40" height="30" fill="#aaa"/&gt;
  &lt;path d="M5,100 q40,10 80,0 t80,0" stroke="#777" stroke-width="2" fill="none"&gt;
    <span class="example-code">&lt;adj:<a href="#L1740">connection</a> from="one % 1, 0.5" to="other % 0, 0.5"/&gt;</span>
  &lt;/path&gt;
  <span class="deemphasize-code">&lt;path d="M5,100 q40,10 80,0 t80,0" stroke="lightgray" stroke-width="2" fill="none" /&gt;
&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-007-rider.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;rect adj:id="one" x="5" y="5" width="40" height="30" fill="#000"/&gt;
  &lt;rect adj:id="other" x="145" y="75" width="40" height="30" fill="#aaa"/&gt;
  &lt;g&gt;
    &lt;adj:connection from="one%1,0.5" to="other%0,0.5"/&gt;
    &lt;path d="M5,100 q40,10 80,0 t80,0" stroke="#777" stroke-width="2" fill="none"/&gt;
    &lt;rect width="30" height="20" fill="#444"&gt;
      <span class="example-code">&lt;adj:<a href="#L8701">rider</a> at="0.5"/&gt;</span>
    &lt;/rect&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-008-circleForParent.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;rect x="30" y="30" width="50" height="20" fill="#000"/&gt;
    &lt;circle r="5" stroke="gray" fill="gray" fill-opacity="0.2"&gt;
      <span class="example-code">&lt;adj:<a href="#L9691">circleForParent</a>/&gt;</span>
    &lt;/circle&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-009-ellipseForParent.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;rect x="30" y="30" width="50" height="20" fill="#000"/&gt;
    &lt;ellipse rx="5" ry="5" stroke="gray" fill="gray" fill-opacity="0.2"&gt;
      <span class="example-code">&lt;adj:<a href="#L9743">ellipseForParent</a>/&gt;</span>
    &lt;/ellipse&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-010-circularList.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="140" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:<a href="#L20521">circularList</a> gap="5"/&gt;</span>
    &lt;circle r="10" fill="#000"/&gt;
    &lt;rect width="30" height="20" fill="#222"/&gt;
    &lt;rect width="30" height="20" fill="#444"/&gt;
    &lt;rect width="30" height="20" fill="#666"/&gt;
    &lt;rect width="30" height="20" fill="#888"/&gt;
    &lt;rect width="30" height="20" fill="#aaa"/&gt;
    &lt;rect width="30" height="20" fill="#bbb"/&gt;
    &lt;rect width="30" height="20" fill="#ccc"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-045-verticalTree.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="130" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:<a href="#L8469">verticalTree</a>/&gt;</span>
    &lt;text <span class="example-code">adj:id="r-1"</span>&gt;R1&lt;/text&gt;
    &lt;text adj:id="l-1-1" <span class="example-code">adj:treeParent="r-1"</span>&gt;L11&lt;/text&gt;
    &lt;text adj:id="n-1-2" adj:treeParent="r-1"&gt;N12&lt;/text&gt;
    &lt;text adj:id="n-1-2-1" adj:treeParent="n-1-2"&gt;N121&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-1" adj:treeParent="n-1-2-1"&gt;L1211&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-2" adj:treeParent="n-1-2-1"&gt;L1212&lt;/text&gt;
    &lt;text adj:id="l-1-2-2" adj:treeParent="n-1-2"&gt;L122&lt;/text&gt;
    &lt;text adj:id="l-1-3" adj:treeParent="r-1"&gt;L13&lt;/text&gt;
    &lt;line stroke="#666"&gt;
      &lt;adj:connection from="r-1%0.2,1" to="l-1-1%0.8,0"/&gt;
    &lt;/line&gt;
    …
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-051-horizontalTree.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="140" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:<a href="#L8469">horizontalTree</a>/&gt;</span>
    &lt;text <span class="example-code">adj:id="r-1"</span>&gt;R1&lt;/text&gt;
    &lt;text adj:id="l-1-1" <span class="example-code">adj:treeParent="r-1"</span>&gt;L11&lt;/text&gt;
    &lt;text adj:id="n-1-2" adj:treeParent="r-1"&gt;N12&lt;/text&gt;
    &lt;text adj:id="n-1-2-1" adj:treeParent="n-1-2"&gt;N121&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-1" adj:treeParent="n-1-2-1"&gt;L1211&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-2" adj:treeParent="n-1-2-1"&gt;L1212&lt;/text&gt;
    &lt;text adj:id="l-1-2-2" adj:treeParent="n-1-2"&gt;L122&lt;/text&gt;
    &lt;text adj:id="l-1-3" adj:treeParent="r-1"&gt;L13&lt;/text&gt;
    &lt;line stroke="#666"&gt;
      &lt;adj:connection from="r-1%1,0.2" to="l-1-1%0,0.8"/&gt;
    &lt;/line&gt;
    …
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-053-vine.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="180" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;adj:verticalTree leftGap="20" centerGap="30" childlessGap="10" middleGap="40"/&gt;
    &lt;rect adj:id="o1" width="40" height="30" fill="#000"/&gt;
    &lt;rect adj:id="o2" adj:treeParent="o1" width="30" height="20" fill="#666"/&gt;
    &lt;rect adj:id="o3" adj:treeParent="o2" width="25" height="15" fill="#888"/&gt;
    &lt;rect adj:id="o4" adj:treeParent="o2" width="25" height="15" fill="#aaa"/&gt;
    &lt;rect adj:id="o5" adj:treeParent="o1" width="30" height="20" fill="#bbb"/&gt;
    &lt;rect adj:id="o6" adj:treeParent="o5" width="25" height="15" fill="#ccc"/&gt;
    &lt;rect adj:id="o7" adj:treeParent="o5" width="25" height="15" fill="#ddd"/&gt;
  &lt;/g&gt;
  &lt;path d="M0,0" stroke="#777" stroke-width="2" fill="none" <span class="example-code">adj:d="M ~o1#x - 10, ~o1#yh</span>
  C ~o1#x - 10, ~o1#yh + 10 ~o2#x - 10, ~o2#y%-0.3 ~o2#x - 10, ~o2#cy
  S ~o3#x - 10, ~o3#y%-0.3 ~o3#x - 10, ~o3#cy
  C ~o3#x - 10, ~o3#yh + 10 ~o3#x, ~o3#yh + 10 ~o3#cx, ~o3#yh + 10
  S ~o4#x, ~o4#yh + 10 ~o4#cx, ~o4#yh + 10
  S ~o4#xw + 10, ~o4#yh + 10 ~o4#xw + 10, ~o4#cy
  C ~o4#xw + 10, ~o4#y * 0.5 + ~o2#yh * 0.5 ~o2#xw, <span class="example-code">~o2#yh * 0.5 + ~o4#y * 0.5 + 10</span> ~o2#xw, ~o2#yh * 0.5 + ~o4#y * 0.5
  S ~o2#xw, ~o2#yh * 0.5 + ~o5#yh * 0.5 + 10 ~o2#xw * 0.5 + ~o5#x * 0.5, ~o2#yh * 0.5 + ~o5#yh * 0.5 + 10"&gt;
    <span class="example-code">&lt;adj:<a href="#L1796">vine</a>/&gt;</span>
  &lt;/path&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-054-floater.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="160" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;rect adj:id="one" x="15" y="65" width="40" height="30" fill="#000"/&gt;
    &lt;rect adj:id="other" x="95" y="15" width="40" height="30" fill="#666"/&gt;
    &lt;rect adj:id="another" x="145" y="115" width="40" height="30" fill="#aaa"/&gt;
    &lt;path d="M0,0 l40,0 -20,-50 z" fill="#444"&gt;
      <span class="example-code">&lt;adj:<a href="#L2184">floater</a> at="~one#cx*0.333+~other#cx*0.333+~another#cx*0.333,~one#cy*0.333+~other#cy*0.333+~another#cy*0.333"/&gt;</span>
    &lt;/path&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-060-fit.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;style type="text/css"&gt;&lt;![CDATA[
  circle { stroke: black; stroke-width: 1; }
  ]]&gt;&lt;/style&gt;
  &lt;rect width="200" height="150" fill="linen"/&gt;</span>
  &lt;g adj:command="horizontalList" adj:makeGrid="true" adj:maxWidth="200" adj:gap="10" adj:hAlign="center" adj:vAlign="middle"&gt;
    &lt;circle fill="#444" r="25"/&gt;
    &lt;g&gt;
      &lt;circle fill="#ccc" r="25" <span class="example-code">adj:command="<a href="#L2299">fit</a>" adj:maxHeight="20"</span>/&gt;
    &lt;/g&gt;
    &lt;g&gt;
      &lt;circle fill="#ccc" r="25" <span class="example-code">adj:command="fit" adj:maxWidth="40" adj:maxHeight="30"</span>/&gt;
    &lt;/g&gt;
    &lt;g&gt;
      &lt;circle fill="#ccc" r="25" <span class="example-code">adj:command="fit" adj:maxWidth="100"</span>/&gt;
    &lt;/g&gt;
    &lt;g&gt;
      &lt;circle fill="#ccc" r="25" <span class="example-code">adj:command="fit" adj:height="70"</span>/&gt;
    &lt;/g&gt;
    &lt;g&gt;
      &lt;circle fill="#ccc" r="25" <span class="example-code">adj:command="fit" adj:width="120" adj:height="80" adj:maxWidth="40"</span>/&gt;
    &lt;/g&gt;
  &lt;/g&gt;
  &lt;g adj:command="floater" adj:at="0,0" adj:pin="0,0"&gt;
    &lt;adj:variable name="w" value="200"/&gt;
    &lt;adj:variable name="h" value="150"/&gt;
    &lt;path adj:command="vine" stroke="#777" stroke-width="1" opacity="0.2" fill="none" d="
    M 0,10 h ^w
    M 0,20 h ^w
    …
    "/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<h3 id="L7353">1.11. Command Options</h3>

<p>Most commands take optional parameters.</p>

<h4 id="L7357">1.11.1. Command horizontalList Options</h4>

<p>The optional parameters of <code>horizontalList</code>:</p>

<table border="1">
  <tbody>
    <tr>
      <td><img alt="example" src="adj-ex-011-horizontalList.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:horizontalList gap="5"/&gt;</span>
    &lt;rect width="30" height="20" fill="#000"/&gt;
    &lt;rect width="32" height="22" fill="#222"/&gt;
    &lt;rect width="34" height="24" fill="#444"/&gt;
    &lt;rect width="36" height="26" fill="#666"/&gt;
    &lt;rect width="38" height="28" fill="#888"/&gt;
    &lt;rect width="40" height="30" fill="#aaa"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
        src="adj-ex-012-horizontalList-maxPerRow.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:horizontalList maxPerRow="3" gap="5"/&gt;</span>
    &lt;rect width="30" height="20" fill="#000"/&gt;
    &lt;rect width="32" height="22" fill="#222"/&gt;
    &lt;rect width="34" height="24" fill="#444"/&gt;
    &lt;rect width="36" height="26" fill="#666"/&gt;
    &lt;rect width="38" height="28" fill="#888"/&gt;
    &lt;rect width="40" height="30" fill="#aaa"/&gt;
    &lt;rect width="42" height="32" fill="#bbb"/&gt;
    &lt;rect width="44" height="34" fill="#ccc"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
      src="adj-ex-013-horizontalList-maxWidth.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="150" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:horizontalList maxWidth="120" gap="5"/&gt;</span>
    &lt;rect width="30" height="20" fill="#000"/&gt;
    &lt;rect width="32" height="22" fill="#222"/&gt;
    &lt;rect width="34" height="24" fill="#444"/&gt;
    &lt;rect width="36" height="26" fill="#666"/&gt;
    &lt;rect width="38" height="28" fill="#888"/&gt;
    &lt;rect width="40" height="30" fill="#aaa"/&gt;
    &lt;rect width="42" height="32" fill="#bbb"/&gt;
    &lt;rect width="44" height="34" fill="#ccc"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
      src="adj-ex-014-horizontalList-makeGrid.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:horizontalList makeGrid="true" maxPerRow="3" gap="5"/&gt;</span>
    &lt;rect width="30" height="20" fill="#000"/&gt;
    &lt;rect width="32" height="22" fill="#222"/&gt;
    &lt;rect width="34" height="24" fill="#444"/&gt;
    &lt;rect width="36" height="26" fill="#666"/&gt;
    &lt;rect width="38" height="28" fill="#888"/&gt;
    &lt;rect width="40" height="30" fill="#aaa"/&gt;
    &lt;rect width="42" height="32" fill="#bbb"/&gt;
    &lt;rect width="44" height="34" fill="#ccc"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
      src="adj-ex-015-horizontalList-hAlign.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:horizontalList makeGrid="true" hAlign="center" vAlign="middle" maxPerRow="3" gap="5"/&gt;</span>
    &lt;rect width="30" height="20" fill="#000"/&gt;
    &lt;rect width="32" height="22" fill="#222"/&gt;
    &lt;rect width="34" height="24" fill="#444"/&gt;
    &lt;rect width="36" height="26" fill="#666"/&gt;
    &lt;rect width="38" height="28" fill="#888"/&gt;
    &lt;rect width="40" height="30" fill="#aaa"/&gt;
    &lt;rect width="42" height="32" fill="#bbb"/&gt;
    &lt;rect width="44" height="34" fill="#ccc"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
        src="adj-ex-016-horizontalList-horizontalGap.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:horizontalList maxPerRow="4" horizontalGap="15" verticalGap="3"/&gt;</span>
    &lt;rect width="30" height="20" fill="#000"/&gt;
    &lt;rect width="30" height="20" fill="#222"/&gt;
    &lt;rect width="30" height="20" fill="#444"/&gt;
    &lt;rect width="30" height="20" fill="#666"/&gt;
    &lt;rect width="30" height="20" fill="#888"/&gt;
    &lt;rect width="30" height="20" fill="#999"/&gt;
    &lt;rect width="30" height="20" fill="#aaa"/&gt;
    &lt;rect width="30" height="20" fill="#bbb"/&gt;
    &lt;rect width="30" height="20" fill="#ccc"/&gt;
    &lt;rect width="30" height="20" fill="#ddd"/&gt;
    &lt;rect fill="none" stroke="lightgray" stroke-width="2" width="0" height="0"&gt;
      &lt;adj:frameForParent inset="1"/&gt;
    &lt;/rect&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
      src="adj-ex-017-horizontalList-leftGap.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:horizontalList maxPerRow="4" leftGap="20" centerGap="5" rightGap="12" topGap="10" middleGap="3" bottomGap="7"/&gt;</span>
    &lt;rect width="30" height="20" fill="#000"/&gt;
    &lt;rect width="30" height="20" fill="#222"/&gt;
    &lt;rect width="30" height="20" fill="#444"/&gt;
    &lt;rect width="30" height="20" fill="#666"/&gt;
    &lt;rect width="30" height="20" fill="#888"/&gt;
    &lt;rect width="30" height="20" fill="#999"/&gt;
    &lt;rect width="30" height="20" fill="#aaa"/&gt;
    &lt;rect width="30" height="20" fill="#bbb"/&gt;
    &lt;rect width="30" height="20" fill="#ccc"/&gt;
    &lt;rect width="30" height="20" fill="#ddd"/&gt;
    &lt;rect fill="none" stroke="lightgray" stroke-width="2" width="0" height="0"&gt;
      &lt;adj:frameForParent inset="1"/&gt;
    &lt;/rect&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<p>The fractions in parameters <code>hAlign</code> and <code>vAlign</code>
accept decimal numbers, but they also recognize some symbols (strings in
JavaScript).</p>

<table border="1">
  <tbody>
    <tr>
      <td rowspan="3">hAlign</td>
      <td>left</td>
      <td>0.0</td>
    </tr>
    <tr>
      <td>center</td>
      <td>0.5</td>
    </tr>
    <tr>
      <td>right</td>
      <td>1.0</td>
    </tr>
    <tr>
      <td rowspan="3">vAlign</td>
      <td>top</td>
      <td>0.0</td>
    </tr>
    <tr>
      <td>middle</td>
      <td>0.5</td>
    </tr>
    <tr>
      <td>bottom</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>

<h4 id="L7545">1.11.2. Command verticalList Options</h4>

<table border="1">
  <tbody>
    <tr>
      <td><img alt="example" src="adj-ex-002-verticalList.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:<a href="#L7545">verticalList</a> gap="5"/&gt;</span>
    &lt;rect width="45" height="30" fill="#000"/&gt;
    &lt;rect width="40" height="25" fill="#444"/&gt;
    &lt;rect width="35" height="20" fill="#888"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<p>The optional parameters of <code>verticalList</code> are very similar to the
optional parameters of <code><a href="#L7357">horizontalList</a></code>.</p>

<p>Notably different, there is <code>maxHeight</code> <span
class="deemphasize">(instead of <code>maxWidth</code>, duh)</span> and
<code>maxPerColumn</code> <span class="deemphasize">(instead of
<code>maxPerRow</code>)</span>.</p>

<h4 id="L12321">1.11.3. Command frameForParent Options</h4>

<p>The optional parameters of <code>frameForParent</code>:</p>

<table border="1">
  <tbody>
    <tr>
      <td><img alt="example"
        src="adj-ex-018-frameForParent-horizontalInset.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;adj:horizontalList gap="10"/&gt;
    &lt;rect fill="none" stroke="black" stroke-width="4" width="0" height="0" rx="4" ry="4"&gt;
      <span class="example-code">&lt;adj:frameForParent inset="2"/&gt;</span>
    &lt;/rect&gt;
    &lt;rect fill="none" stroke="gray" stroke-width="2" width="0" height="0" rx="2" ry="2"&gt;
      <span class="example-code">&lt;adj:frameForParent horizontalInset="4" verticalInset="3"/&gt;</span>
    &lt;/rect&gt;
    &lt;rect width="45" height="30" fill="#000"/&gt;
    &lt;rect width="40" height="25" fill="#444"/&gt;
    &lt;rect width="35" height="20" fill="#888"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
        src="adj-ex-019-frameForParent-leftInset.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;adj:horizontalList gap="10"/&gt;
    &lt;rect fill="none" stroke="black" stroke-width="4" width="0" height="0"&gt;
      <span class="example-code">&lt;adj:frameForParent leftInset="2" rightInset="0" topInset="2" bottomInset="0"/&gt;</span>
    &lt;/rect&gt;
    &lt;rect fill="none" stroke="gray" stroke-width="4" width="0" height="0"&gt;
      <span class="example-code">&lt;adj:frameForParent inset="3"/&gt;</span>
    &lt;/rect&gt;
    &lt;rect width="45" height="30" fill="#000"/&gt;
    &lt;rect width="40" height="25" fill="#444"/&gt;
    &lt;rect width="35" height="20" fill="#888"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<h4 id="L2589">1.11.4. Command textBreaks Options</h4>

<p>The optional parameters of <code>textBreaks</code>:</p>

<table border="1">
  <tbody>
    <tr>
      <td><img alt="example"
      src="adj-ex-020-textBreaks-wordBreaks.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;g font-size="12"&gt;
    <span class="example-code">&lt;adj:textBreaks wordBreaks="true"/&gt;</span>
    <span class="example-code">&lt;adj:horizontalList maxWidth="190" gap="5" centerGap="3" topGap="10" leftGap="10"/&gt;</span>
    &lt;text&gt;Source line one,
source line two.&lt;/text&gt;
    &lt;text&gt;And source line three.&lt;/text&gt;
    &lt;rect fill="none" stroke="lightgray" stroke-width="2" width="0" height="0"&gt;
      &lt;adj:frameForParent inset="1"/&gt;
    &lt;/rect&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
      src="adj-ex-021-textBreaks-lineBreaks.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;g font-size="12"&gt;
    <span class="example-code">&lt;adj:textBreaks lineBreaks="true"/&gt;</span>
    <span class="example-code">&lt;adj:horizontalList maxPerRow="1" gap="5" topGap="10" leftGap="10"/&gt;</span>
    &lt;text&gt;Source line one,
source line two.&lt;/text&gt;
    &lt;text&gt;And source line three.&lt;/text&gt;
    &lt;rect fill="none" stroke="lightgray" stroke-width="2" width="0" height="0"&gt;
      &lt;adj:frameForParent inset="1"/&gt;
    &lt;/rect&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<h4 id="L1740">1.11.5. Command connection Options</h4>

<p>The optional parameters of <code>connection</code>:</p>

<table border="1">
  <tbody>
    <tr>
      <td><img alt="example" src="adj-ex-022-connection-from.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;rect adj:id="one" x="5" y="5" width="40" height="30" stroke="#000" fill="#aaa"/&gt;
  &lt;rect adj:id="other" x="145" y="55" width="40" height="30" stroke="#000" fill="#ccc"/&gt;
  &lt;path d="M5,100 q40,10 80,0 t80,0" stroke="#000" stroke-width="2" fill="none"&gt;
    <span class="example-code">&lt;adj:connection from="one" to="other"/&gt;</span>
  &lt;/path&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-023-connection-fromXY.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;rect adj:id="one" x="5" y="5" width="40" height="30" stroke="#000" fill="#aaa"/&gt;
  &lt;rect adj:id="other" x="145" y="55" width="40" height="30" stroke="#000" fill="#ccc"/&gt;
  &lt;path d="M5,100 q40,10 80,0 t80,0" stroke="#000" stroke-width="2" fill="none"&gt;
    <span class="example-code">&lt;adj:connection from="one%1,0.5" to="other%0,0.5"/&gt;</span>
  &lt;/path&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-024-connection-vector0.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;rect adj:id="one" x="5" y="5" width="40" height="30" stroke="#000" fill="#aaa"/&gt;
  &lt;rect adj:id="other" x="145" y="55" width="40" height="30" stroke="#000" fill="#ccc"/&gt;
  &lt;g&gt;
    <span class="example-code">&lt;adj:connection from="one%1,0.5" to="other%0,0.5"/&gt;</span>
    &lt;line x1="5" y1="100" x2="185" y2="100"/&gt;
    &lt;path d="M15,100 l-10,-10 20,0 5,5 135,0 0,-5 20,10 -20,10 0,-5 -135,0 -5,5 -20,0 z"
      stroke="#000" stroke-width="1" fill-opacity="0.5" fill="#888"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-025-connection-vector1.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;rect adj:id="one" x="5" y="5" width="40" height="30" stroke="#000" fill="#aaa"/&gt;
  &lt;rect adj:id="other" x="145" y="55" width="40" height="30" stroke="#000" fill="#ccc"/&gt;
  &lt;g&gt;
    <span class="example-code">&lt;adj:connection from="one%1,0.5" to="other%0,0.5" vector="1"/&gt;</span>
    &lt;path d="M15,100 l-10,-10 20,0 5,5 135,0 0,-5 20,10 -20,10 0,-5 -135,0 -5,5 -20,0 z"
      stroke="#000" stroke-width="1" fill-opacity="0.5" fill="#888"/&gt;
    &lt;line x1="5" y1="100" x2="185" y2="100"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<p>In parameters <code>from</code> and <code>to</code> an expression
<code>identifier % decimal , decimal</code> means from the element <a
href="#L1780">referenced by the identifier</a> determine coordinates with
<code>0,0</code> being its bounding box <code>x,y</code> and <code>1,1</code>
being its <code>x+width,y+height</code>. With decimal number values often
between 0.0 and 1.0 they also can be outside that range.</p>

<p>As implemented, <code>connection</code> works for simplified cases
<code>line</code> and <code>path</code>, and for general case group
<code>g</code> containing one <code>line</code> (or <code>path</code>) as
<code>vector</code> (default first, i.e. index 0) and any number of lines and
paths as children of that group.</p>

<h4 id="L8701">1.11.6. Command rider Options</h4>

<p>The optional parameters of <code>rider</code>:</p>

<table border="1">
  <tbody>
    <tr>
      <td><img alt="example" src="adj-ex-026-rider.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;rect adj:id="one" x="5" y="5" width="40" height="30" fill="#000"/&gt;
    &lt;rect adj:id="other" x="145" y="75" width="40" height="30" fill="#aaa"/&gt;
    &lt;g&gt;
      &lt;adj:connection from="one%1,0.5" to="other%0,0.5"/&gt;
      &lt;path d="M5,100 q40,10 80,0 t80,0" stroke="#777" stroke-width="2" fill="none"/&gt;
      &lt;rect width="30" height="20" fill="#444"&gt;
        <span class="example-code">&lt;adj:rider/&gt;</span>
      &lt;/rect&gt;
    &lt;/g&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-027-rider-at.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;rect adj:id="one" x="5" y="5" width="40" height="30" fill="#000"/&gt;
  &lt;rect adj:id="other" x="145" y="75" width="40" height="30" fill="#aaa"/&gt;
  &lt;g&gt;
    &lt;adj:connection from="one%1,0.5" to="other%0,0.5"/&gt;
    &lt;path d="M5,100 q40,10 80,0 t80,0" stroke="#777" stroke-width="2" fill="none"/&gt;
    &lt;rect width="30" height="20" fill="#444"&gt;
      <span class="example-code">&lt;adj:rider at="0.7"/&gt;</span>
    &lt;/rect&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-028-rider-at2.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;rect adj:id="one" x="5" y="5" width="40" height="30" fill="#000"/&gt;
    &lt;rect adj:id="other" x="145" y="75" width="40" height="30" fill="#aaa"/&gt;
    &lt;g&gt;
      &lt;adj:connection from="one%1,0.5" to="other%0,0.5"/&gt;
      &lt;path d="M5,100 q40,10 80,0 t80,0" stroke="#777" stroke-width="2" fill="none"/&gt;
      &lt;rect width="30" height="20" fill="#444"&gt;
        <span class="example-code">&lt;adj:rider at="0.2,0.7"/&gt;</span>
      &lt;/rect&gt;
    &lt;/g&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-029-rider-adjust-near.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;rect adj:id="one" x="5" y="5" width="40" height="30" fill="#000"/&gt;
    &lt;rect adj:id="other" x="145" y="75" width="40" height="30" fill="#aaa"/&gt;
    &lt;g&gt;
      &lt;adj:connection from="one%1,0.5" to="other%0,0.5"/&gt;
      &lt;path d="M5,100 q40,10 80,0 t80,0" stroke="#777" stroke-width="2" fill="none"/&gt;
      &lt;rect width="30" height="20" fill="#444"&gt;
        <span class="example-code">&lt;adj:rider at="0.2,0.7" adjust="near"/&gt;</span>
      &lt;/rect&gt;
    &lt;/g&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-030-rider-adjust-clear.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;rect adj:id="one" x="5" y="5" width="40" height="30" fill="#000"/&gt;
    &lt;rect x="85" y="15" width="40" height="30" fill="#666"/&gt;
    &lt;rect x="25" y="45" width="40" height="30" fill="#888"/&gt;
    &lt;rect adj:id="other" x="145" y="75" width="40" height="30" fill="#aaa"/&gt;
    &lt;g&gt;
      &lt;adj:connection from="one%1,0.5" to="other%0,0.5"/&gt;
      &lt;path d="M5,100 q40,10 80,0 t80,0" stroke="#777" stroke-width="2" fill="none"/&gt;
      &lt;rect width="30" height="20" fill="#444"&gt;
        <span class="example-code">&lt;adj:rider/&gt;</span>
      &lt;/rect&gt;
    &lt;/g&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-031-rider-gap.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;rect adj:id="one" x="5" y="5" width="40" height="30" fill="#000"/&gt;
    &lt;rect x="85" y="15" width="40" height="30" fill="#666"/&gt;
    &lt;rect x="25" y="45" width="40" height="30" fill="#888"/&gt;
    &lt;rect adj:id="other" x="145" y="75" width="40" height="30" fill="#aaa"/&gt;
    &lt;g&gt;
      &lt;adj:connection from="one%1,0.5" to="other%0,0.5"/&gt;
      &lt;path d="M5,100 q40,10 80,0 t80,0" stroke="#777" stroke-width="2" fill="none"/&gt;
      &lt;rect width="30" height="20" fill="#444"&gt;
        <span class="example-code">&lt;adj:rider at="0.2,0.7" adjust="near" gap="2"/&gt;</span>
      &lt;/rect&gt;
    &lt;/g&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-032-rider-pin.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;rect adj:id="one" x="5" y="5" width="40" height="30" fill="#000"/&gt;
    &lt;rect adj:id="other" x="145" y="75" width="40" height="30" fill="#aaa"/&gt;
    &lt;g&gt;
      &lt;adj:connection from="one%1,0.5" to="other%0,0.5"/&gt;
      &lt;path d="M5,100 q40,10 80,0 t80,0" stroke="#777" stroke-width="2" fill="none"/&gt;
      &lt;rect width="30" height="20" fill="#444"&gt;
        <span class="example-code">&lt;adj:rider pin="0.0,1.0"/&gt;</span>
      &lt;/rect&gt;
    &lt;/g&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-033-rider-path.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;rect adj:id="one" x="5" y="5" width="40" height="30" fill="#000"/&gt;
    &lt;rect adj:id="other" x="145" y="75" width="40" height="30" fill="#aaa"/&gt;
    &lt;path adj:id="connect" d="M5,100 q40,10 80,0 t80,0" stroke="#777" stroke-width="2" fill="none"&gt;
      &lt;adj:connection from="one%1,0.5" to="other%0,0.5"/&gt;
    &lt;/path&gt;
    &lt;rect width="30" height="20" fill="#444"&gt;
      <span class="example-code">&lt;adj:rider path="connect"/&gt;</span>
    &lt;/rect&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<p>The fraction or fraction pair in parameter <code>at</code> accepts decimal
numbers. With values often between 0.0 and 1.0 they also can be outside that
range.</p>

<p>Parameter <code>adjust</code> accepts some symbols (strings in
JavaScript).</p>

<table border="1">
  <tbody>
    <tr>
      <td rowspan="3">adjust</td>
      <td>clear</td>
    </tr>
    <tr>
      <td>near</td>
    </tr>
    <tr>
      <td>none</td>
    </tr>
  </tbody>
</table>

<p>If given no <code>at</code> and no <code>adjust</code> then <code>at</code>
defaults from 0.0 to 1.0 and <code>adjust</code> defaults to
<code>clear</code>. If given no <code>at</code> but <code>adjust</code> given
<code>near</code> then <code>at</code> defaults from 0.0 to 0.5.</p>

<p>If given one decimal number for <code>at</code> then <code>adjust</code>
defaults to <code>none</code>.</p>

<p>If given two decimal numbers for <code>at</code> then <code>adjust</code>
defaults to <code>clear</code>.</p>

<p>The fraction pair in parameter <code>pin</code> accepts decimal numbers.
With values often between 0.0 and 1.0 they also can be outside that range.</p>

<p>As implemented, <code>rider</code> tries to stay clear of its group's
siblings, or to stay clear of its own siblings if given a <code>path</code>
attribute.</p>

<p>Parameter <code>steps</code> should not be set in most circumstances. It
accepts an integer number and defaults to 10. It does not correspond to the
final resolution of adjusting coordinates.</p>

<h4 id="L9691">1.11.7. Command circleForParent Options</h4>

<p>The optional parameter of <code>circleForParent</code>:</p>

<table border="1">
  <tbody>
    <tr>
      <td><img alt="example"
      src="adj-ex-034-circleForParent-inset.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;rect x="30" y="30" width="50" height="20" fill="#000"/&gt;
    &lt;circle r="5" stroke="gray" stroke-width="4" fill="gray" fill-opacity="0.2"&gt;
      <span class="example-code">&lt;adj:circleForParent inset="-2"/&gt;</span>
    &lt;/circle&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<h4 id="L9743">1.11.8. Command ellipseForParent Options</h4>

<p>The optional parameters of <code>ellipseForParent</code>:</p>

<table border="1">
  <tbody>
    <tr>
      <td><img alt="example"
      src="adj-ex-035-ellipseForParent-inset.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;rect x="30" y="30" width="50" height="20" fill="#000"/&gt;
    &lt;ellipse rx="5" ry="5" stroke="gray" stroke-width="4" fill="gray" fill-opacity="0.2"&gt;
      <span class="example-code">&lt;adj:ellipseForParent inset="-2"/&gt;</span>
    &lt;/ellipse&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
        src="adj-ex-036-ellipseForParent-horizontalInset.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;rect x="30" y="30" width="50" height="20" fill="#000"/&gt;
    &lt;ellipse rx="5" ry="5" stroke="gray" stroke-width="4" fill="gray" fill-opacity="0.2"&gt;
      <span class="example-code">&lt;adj:ellipseForParent horizontalInset="-3" verticalInset="-1"/&gt;</span>
    &lt;/ellipse&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<h4 id="L20521">1.11.9. Command circularList Options</h4>

<p>The optional parameters of <code>circularList</code>:</p>

<table border="1">
  <tbody>
    <tr>
      <td><img alt="example" src="adj-ex-037-circularList-gap.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="130" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:circularList gap="5"/&gt;</span>
    &lt;rect width="20" height="20" fill="#000"/&gt;
    &lt;rect width="20" height="20" fill="#222"/&gt;
    &lt;rect width="20" height="20" fill="#444"/&gt;
    &lt;rect width="20" height="20" fill="#666"/&gt;
    &lt;rect width="20" height="20" fill="#888"/&gt;
    &lt;rect width="20" height="20" fill="#aaa"/&gt;
    &lt;rect width="20" height="20" fill="#bbb"/&gt;
    &lt;rect width="20" height="20" fill="#ccc"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-038-circularList-rGap.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="140" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:circularList rGap="5" cGap="15"/&gt;</span>
    &lt;rect width="20" height="20" fill="#000"/&gt;
    &lt;rect width="20" height="20" fill="#222"/&gt;
    &lt;rect width="20" height="20" fill="#444"/&gt;
    &lt;rect width="20" height="20" fill="#666"/&gt;
    &lt;rect width="20" height="20" fill="#888"/&gt;
    &lt;rect width="20" height="20" fill="#aaa"/&gt;
    &lt;rect width="20" height="20" fill="#bbb"/&gt;
    &lt;rect width="20" height="20" fill="#ccc"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
      src="adj-ex-039-circularList-fromAngle.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:circularList fromAngle="225" toAngle="315" cGap="5" horizontalGap="10" verticalGap="20"/&gt;</span>
    &lt;g/&gt;
    &lt;rect width="15" height="15" fill="#000"/&gt;
    &lt;rect width="15" height="15" fill="#222"/&gt;
    &lt;rect width="15" height="15" fill="#444"/&gt;
    &lt;rect width="15" height="15" fill="#666"/&gt;
    &lt;rect width="15" height="15" fill="#888"/&gt;
    &lt;rect width="15" height="15" fill="#aaa"/&gt;
    &lt;rect width="15" height="15" fill="#bbb"/&gt;
    &lt;rect width="15" height="15" fill="#ccc"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
      src="adj-ex-040-circularList-rAlign.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:circularList rAlign="inside" gap="2" leftGap="10" topGap="10" rightGap="5" bottomGap="5"/&gt;</span>
    &lt;circle r="20" fill="#000"/&gt;
    &lt;rect width="3" height="3" fill="#222"/&gt;
    &lt;rect width="6" height="6" fill="#444"/&gt;
    &lt;rect width="9" height="9" fill="#666"/&gt;
    &lt;rect width="12" height="12" fill="#888"/&gt;
    &lt;rect width="15" height="15" fill="#aaa"/&gt;
    &lt;rect width="18" height="18" fill="#bbb"/&gt;
    &lt;rect width="21" height="21" fill="#ccc"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<p>First element is trunk in the center, remaining elements are branches. First
element could be an empty group.</p>

<p>The fraction in parameter <code>rAlign</code> accepts decimal numbers, but
it also recognize some symbols (strings in JavaScript).</p>

<table border="1">
  <tbody>
    <tr>
      <td rowspan="3">rAlign</td>
      <td>inside</td>
      <td>0.0</td>
    </tr>
    <tr>
      <td>median</td>
      <td>0.5</td>
    </tr>
    <tr>
      <td>outside</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>

<h4 id="L8469">1.11.10. Command verticalTree Options</h4>

<p>The optional parameters of <code>verticalTree</code>:</p>

<table border="1">
  <tbody>
    <tr>
      <td><img alt="example"
        src="adj-ex-046-verticalTree-autoParrots.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="130" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:verticalTree autoParrots="true"/&gt;</span>
    &lt;text adj:id="r-1"&gt;R1&lt;/text&gt;
    &lt;text adj:id="r-2"&gt;R2&lt;/text&gt;
    &lt;text adj:id="l-1-1" adj:treeParent="r-1"&gt;L11&lt;/text&gt;
    &lt;text adj:id="n-1-2" adj:treeParent="r-1"&gt;N12&lt;/text&gt;
    &lt;text adj:id="n-1-2-1" adj:treeParent="n-1-2"&gt;N121&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-1" adj:treeParent="n-1-2-1"&gt;L1211&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-2" adj:treeParent="n-1-2-1"&gt;L1212&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-3" adj:treeParent="n-1-2-1"&gt;L1213&lt;/text&gt;
    &lt;text adj:id="l-1-2-2" adj:treeParent="n-1-2"&gt;L122&lt;/text&gt;
    &lt;text adj:id="l-1-2-3" adj:treeParent="n-1-2"&gt;L123&lt;/text&gt;
    &lt;text adj:id="l-1-3" adj:treeParent="r-1"&gt;L13&lt;/text&gt;
    &lt;line stroke="#666"&gt;
      &lt;adj:connection from="r-1%0.2,1" to="l-1-1%0.8,0"/&gt;
    &lt;/line&gt;
    …
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
      src="adj-ex-047-verticalTree-hAlign.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="160" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:verticalTree autoParrots="true" hAlign="left" vAlign="0.2" gap="12"/&gt;</span>
    &lt;text adj:id="r-1" font-size="25"&gt;R1&lt;/text&gt;
    &lt;text adj:id="r-2"&gt;R2&lt;/text&gt;
    &lt;text adj:id="l-1-1" font-size="20" adj:treeParent="r-1"&gt;L11&lt;/text&gt;
    &lt;text adj:id="n-1-2" font-size="15" adj:treeParent="r-1"&gt;N12&lt;/text&gt;
    &lt;text adj:id="n-1-2-1" font-size="12" adj:treeParent="n-1-2"&gt;N121&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-1" adj:treeParent="n-1-2-1"&gt;L1211&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-2" adj:treeParent="n-1-2-1"&gt;L1212&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-3" adj:treeParent="n-1-2-1"&gt;L1213&lt;/text&gt;
    &lt;text adj:id="l-1-2-2" adj:treeParent="n-1-2"&gt;L122&lt;/text&gt;
    &lt;text adj:id="l-1-2-3" adj:treeParent="n-1-2"&gt;L123&lt;/text&gt;
    &lt;text adj:id="l-1-3" adj:treeParent="r-1"&gt;L13&lt;/text&gt;
    &lt;line stroke="#666"&gt;
      &lt;adj:connection from="r-1%0.2,1" to="l-1-1%0.2,0"/&gt;
    &lt;/line&gt;
    …
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
        src="adj-ex-048-verticalTree-horizontalGap.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="210" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:verticalTree autoParrots="true" horizontalGap="15" verticalGap="30"/&gt;</span>
    &lt;text adj:id="r-1"&gt;R1&lt;/text&gt;
    &lt;text adj:id="r-2"&gt;R2&lt;/text&gt;
    &lt;text adj:id="l-1-1" adj:treeParent="r-1"&gt;L11&lt;/text&gt;
    &lt;text adj:id="n-1-2" adj:treeParent="r-1"&gt;N12&lt;/text&gt;
    &lt;text adj:id="n-1-2-1" adj:treeParent="n-1-2"&gt;N121&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-1" adj:treeParent="n-1-2-1"&gt;L1211&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-2" adj:treeParent="n-1-2-1"&gt;L1212&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-3" adj:treeParent="n-1-2-1"&gt;L1213&lt;/text&gt;
    &lt;text adj:id="l-1-2-2" adj:treeParent="n-1-2"&gt;L122&lt;/text&gt;
    &lt;text adj:id="l-1-2-3" adj:treeParent="n-1-2"&gt;L123&lt;/text&gt;
    &lt;text adj:id="l-1-3" adj:treeParent="r-1"&gt;L13&lt;/text&gt;
    &lt;line stroke="#666"&gt;
      &lt;adj:connection from="r-1%0.2,1" to="l-1-1%0.8,0"/&gt;
    &lt;/line&gt;
    …
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
      src="adj-ex-049-verticalTree-earGap.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="210" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:verticalTree autoParrots="true" leftGap="5" centerGap="20" rightGap="5" topGap="5" middleGap="40" bottomGap="5" childlessGap="10" earGap="30"/&gt;</span>
    &lt;text adj:id="r-1"&gt;R1&lt;/text&gt;
    &lt;text adj:id="r-2"&gt;R2&lt;/text&gt;
    &lt;text adj:id="l-1-1" adj:treeParent="r-1"&gt;L11&lt;/text&gt;
    &lt;text adj:id="n-1-2" adj:treeParent="r-1"&gt;N12&lt;/text&gt;
    &lt;text adj:id="n-1-2-1" adj:treeParent="n-1-2"&gt;N121&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-1" adj:treeParent="n-1-2-1"&gt;L1211&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-2" adj:treeParent="n-1-2-1"&gt;L1212&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-3" adj:treeParent="n-1-2-1"&gt;L1213&lt;/text&gt;
    &lt;text adj:id="l-1-2-2" adj:treeParent="n-1-2"&gt;L122&lt;/text&gt;
    &lt;text adj:id="l-1-2-3" adj:treeParent="n-1-2"&gt;L123&lt;/text&gt;
    &lt;text adj:id="l-1-3" adj:treeParent="r-1"&gt;L13&lt;/text&gt;
    &lt;line stroke="#666"&gt;
      &lt;adj:connection from="r-1%0.2,1" to="l-1-1%0.8,0"/&gt;
    &lt;/line&gt;
    …
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<p>Only layout is provided. This allows the most freedom for illustrating
anything. Examples provided here use instances of command
<code>connection</code> to indicate relationships.</p>

<p>Relationships in <code>verticalTree</code> are defined by child element
attributes <code>adj:treeParent</code> pointing at their sibling element
attributes <code>adj:id</code>.</p>

<p>Nodes intentionally are elements at the same level in SVG. To be clear:
There is <span class="emphasize">not</span> SVG element nesting corresponding
to the tree structure.</p>

<p>Multiple roots are possible.</p>

<p>Several optional parameters of <code>verticalTree</code> are similar to
optional parameters of <code>horizontalList</code>. These include
<code>gap</code>, <code>horizontalGap</code>, <code>leftGap</code>,
<code>centerGap</code>, <code>rightGap</code>, <code>verticalGap</code>,
<code>topGap</code>, <code>middleGap</code>, <code>bottomGap</code>, and
<code>vAlign</code>.</p>

<p>Parameter <code>hAlign</code> aligns a node relative to its children.</p>

<p>Parameter <code>autoParrots</code> lets siblings that have no child sit on
the shoulders of subtrees headed by siblings that do have children.</p>

<p>Parameter <code>earGap</code> is in effect instead of <code>centerGap</code>
between the head of a subtree and its adjacent siblings if they sit on its
shoulders.</p>

<p>Parameter <code>childlessGap</code> is in effect instead of
<code>centerGap</code> when all siblings have no child.</p>

<h4 id="L1773">1.11.11. Command horizontalTree Options</h4>

<table border="1">
  <tbody>
    <tr>
      <td><img alt="example" src="adj-ex-051-horizontalTree.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="140" fill="linen"/&gt;</span>
  &lt;g&gt;
    <span class="example-code">&lt;adj:<a href="#L8469">horizontalTree</a>/&gt;</span>
    &lt;text <span class="example-code">adj:id="r-1"</span>&gt;R1&lt;/text&gt;
    &lt;text adj:id="l-1-1" <span class="example-code">adj:treeParent="r-1"</span>&gt;L11&lt;/text&gt;
    &lt;text adj:id="n-1-2" adj:treeParent="r-1"&gt;N12&lt;/text&gt;
    &lt;text adj:id="n-1-2-1" adj:treeParent="n-1-2"&gt;N121&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-1" adj:treeParent="n-1-2-1"&gt;L1211&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-2" adj:treeParent="n-1-2-1"&gt;L1212&lt;/text&gt;
    &lt;text adj:id="l-1-2-2" adj:treeParent="n-1-2"&gt;L122&lt;/text&gt;
    &lt;text adj:id="l-1-3" adj:treeParent="r-1"&gt;L13&lt;/text&gt;
    &lt;line stroke="#666"&gt;
      &lt;adj:connection from="r-1%1,0.2" to="l-1-1%0,0.8"/&gt;
    &lt;/line&gt;
    …
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<p>The optional parameters of <code>horizontalTree</code> are very similar to
the optional parameters of <code><a href="#L8469">verticalTree</a></code>.</p>

<h4 id="L1796">1.11.12. Command vine Options</h4>

<table border="1">
  <tbody>
    <tr>
      <td><img alt="example" src="adj-ex-053-vine.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="180" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;adj:verticalTree leftGap="20" centerGap="30" childlessGap="10" middleGap="40"/&gt;
    &lt;rect adj:id="o1" width="40" height="30" fill="#000"/&gt;
    &lt;rect adj:id="o2" adj:treeParent="o1" width="30" height="20" fill="#666"/&gt;
    &lt;rect adj:id="o3" adj:treeParent="o2" width="25" height="15" fill="#888"/&gt;
    &lt;rect adj:id="o4" adj:treeParent="o2" width="25" height="15" fill="#aaa"/&gt;
    &lt;rect adj:id="o5" adj:treeParent="o1" width="30" height="20" fill="#bbb"/&gt;
    &lt;rect adj:id="o6" adj:treeParent="o5" width="25" height="15" fill="#ccc"/&gt;
    &lt;rect adj:id="o7" adj:treeParent="o5" width="25" height="15" fill="#ddd"/&gt;
  &lt;/g&gt;
  &lt;path d="M0,0" stroke="#777" stroke-width="2" fill="none" <span class="example-code">adj:d="M ~o1#x - 10, ~o1#yh</span>
  C ~o1#x - 10, ~o1#yh + 10 ~o2#x - 10, ~o2#y%-0.3 ~o2#x - 10, ~o2#cy
  S ~o3#x - 10, ~o3#y%-0.3 ~o3#x - 10, ~o3#cy
  C ~o3#x - 10, ~o3#yh + 10 ~o3#x, ~o3#yh + 10 ~o3#cx, ~o3#yh + 10
  S ~o4#x, ~o4#yh + 10 ~o4#cx, ~o4#yh + 10
  S ~o4#xw + 10, ~o4#yh + 10 ~o4#xw + 10, ~o4#cy
  C ~o4#xw + 10, ~o4#y * 0.5 + ~o2#yh * 0.5 ~o2#xw, <span class="example-code">~o2#yh * 0.5 + ~o4#y * 0.5 + 10</span> ~o2#xw, ~o2#yh * 0.5 + ~o4#y * 0.5
  S ~o2#xw, ~o2#yh * 0.5 + ~o5#yh * 0.5 + 10 ~o2#xw * 0.5 + ~o5#x * 0.5, ~o2#yh * 0.5 + ~o5#yh * 0.5 + 10"&gt;
    <span class="example-code">&lt;adj:<a href="#L1796">vine</a>/&gt;</span>
  &lt;/path&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<p>As implemented, <code>vine</code> works for <code>path</code>.</p>

<p>Command <code>vine</code> evaluates simple arithmetic into plain decimal
numbers.</p>

<p>An expression <code>~ identifier # axis % decimal</code> means from the
element <a href="#L1780">referenced by the identifier</a> determine a
coordinate with <code>0.0</code> being its bounding box <code>x</code> or
<code>y</code> and <code>1.0</code> being its <code>x+width</code> or
<code>y+height</code>. With decimal number values often between 0.0 and 1.0
they also can be outside that range.</p>

<table border="1">
  <tbody>
    <tr>
      <td rowspan="2" style="text-align:center">fine control,<br />
        absolute<br />
        x or y</td>
      <td><pre>~ identifier # x % decimal</pre>
      </td>
      <td><code>x + decimal * width</code></td>
    </tr>
    <tr>
      <td><pre>~ identifier # y % decimal</pre>
      </td>
      <td><code>y + decimal * height</code></td>
    </tr>
    <tr>
      <td rowspan="6" style="text-align:center">shortcuts,<br />
        absolute<br />
        x or y</td>
      <td><code>~ identifier # x</code></td>
      <td><code>#x%0</code>, left</td>
    </tr>
    <tr>
      <td><code>~ identifier # y</code></td>
      <td><code>#y%0</code>, top</td>
    </tr>
    <tr>
      <td><pre>~ identifier # xw</pre>
      </td>
      <td><code>#x%1</code>, which would be <code>x+width</code>, right</td>
    </tr>
    <tr>
      <td><pre>~ identifier # yh</pre>
      </td>
      <td><code>#y%1</code>, which would be <code>y+height</code>, bottom</td>
    </tr>
    <tr>
      <td><pre>~ identifier # cx</pre>
      </td>
      <td><code>#x%.5</code>, same as <code>#x%0.5</code>, which would be
        <code>x+width/2</code>, horizontal center</td>
    </tr>
    <tr>
      <td><pre>~ identifier # cy</pre>
      </td>
      <td><code>#y%.5</code>, same as <code>#y%0.5</code>, which would be
        <code>y+height/2</code>, vertical center</td>
    </tr>
    <tr>
      <td rowspan="2" style="text-align:center">relative<br />
        w or h</td>
      <td><pre>~ identifier # w</pre>
      </td>
      <td><code>width</code></td>
    </tr>
    <tr>
      <td><pre>~ identifier # h</pre>
      </td>
      <td><code>height</code></td>
    </tr>
  </tbody>
</table>

<p>Linear polynomial expressions are evaluated with normal order of operations.
Addition <code>+</code>, subtraction <code>-</code>, and multiplication
<code>*</code> are supported.</p>

<p>As an example, to get the horizontal coordinate exactly in the middle
between the right edge of element <code>one</code> and the left edge of element
<code>other</code>, a possible expression is
<code>~one#xw*0.5+~other#x*0.5</code>. That would be the equivalent of
<code>((one.x + one.width) + other.x) / 2</code>.</p>

<p>Parentheses are <span class="emphasize">not</span> needed and parentheses
are <span class="emphasize">not</span> supported.</p>

<p>Command <code>vine</code> also performs <a href="#L2629">substitution of
variables</a>.</p>

<h5 id="L2057">1.11.12.1. Caveat Regarding <code>-</code> Minus Sign</h5>

<p>After a space separating path coordinates, one <span class="emphasize">must
not start with a <code>-</code> minus sign</span>.</p>

<p>For example, if trying to achieve</p>
<pre>adj:d="M 50,50
  c 20,20 60,20 80,0
  c -20,30 -60,30 -80,0
  m 40,10
  c 40,0 10,60 0,60
  s -40,-60 0,-60"</pre>

<p>the problem is <code>Adj.evaluateArithmetic</code> would evaluate</p>
<pre>adj:d="M 50,50
  c 20,20 60,20 80,0
  c -20,<span class="emphasize"><u>(30 -60)</u></span>,<span class="emphasize"><u>(30 -80)</u></span>,0
  m 40,10
  c 40,0 10,60 0,60
  s -40,-60 0,-60"</pre>

<p>which would give</p>
<pre>adj:d="M 50,50
  c 20,20 60,20 80,0
  c -20,<span class="emphasize">-30</span>,<span class="emphasize">-50</span>,0
  m 40,10
  c 40,0 10,60 0,60
  s -40,-60 0,-60"</pre>

<p>which is <span class="emphasize">not</span> a valid path.</p>

<p>Therefore, one can for example write</p>
<pre>adj:d="M 50,50
  c 20,20 60,20 80,0
  c -20,30 <span class="example-code">0-60</span>,30 <span class="example-code">0-80</span>,0
  m 40,10
  c 40,0 10,60 0,60
  s -40,-60 0,-60"</pre>

<p>The problem has several possible solutions.</p>

<table border="1">
  <tbody>
    <tr>
      <td>intention, but cannot write it this way, don't do this</td>
      <td><pre>c -20,30 -60,30 -80,0</pre>
      </td>
    </tr>
    <tr>
      <td>unintended evaluation, not a valid path, bad result</td>
      <td><pre>c -20,-30,-50,0</pre>
      </td>
    </tr>
    <tr>
      <td>one possible way to write</td>
      <td><pre>c -20,30 0-60,30 0-80,0</pre>
      </td>
    </tr>
    <tr>
      <td>other possible way to write</td>
      <td><pre>c -20,30, -60,30, -80,0</pre>
      </td>
    </tr>
    <tr>
      <td>variations of spacing</td>
      <td><pre>c -20,30 , -60,30 ,-80,0</pre>
      </td>
    </tr>
  </tbody>
</table>

<h4 id="L2184">1.11.13. Command floater Options</h4>

<p>Command <code>floater</code> required parameter <code>at</code> evaluates
simple arithmetic very similar to command <code><a
href="#L1796">vine</a></code>.</p>

<p>The optional parameter of <code>floater</code>:</p>

<table border="1">
  <tbody>
    <tr>
      <td><img alt="example" src="adj-ex-055-floater-pin.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="160" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;rect adj:id="one" x="15" y="65" width="40" height="30" fill="#000"/&gt;
    &lt;rect adj:id="other" x="95" y="15" width="40" height="30" fill="#666"/&gt;
    &lt;rect adj:id="another" x="145" y="115" width="40" height="30" fill="#aaa"/&gt;
    &lt;path d="M0,0 l40,0 -20,-50 z" fill="#444"&gt;
      <span class="example-code">&lt;adj:floater pin="0.5,0" at="~one#cx*0.333+~other#cx*0.333+~another#cx*0.333,~one#cy*0.333+~other#cy*0.333+~another#cy*0.333"/&gt;</span>
    &lt;/path&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<h4 id="L2299">1.11.14. Command fit Options</h4>

<table border="1">
  <tbody>
    <tr>
      <td><img alt="example" src="adj-ex-060-fit.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;style type="text/css"&gt;&lt;![CDATA[
  circle { stroke: black; stroke-width: 1; }
  ]]&gt;&lt;/style&gt;
  &lt;rect width="200" height="150" fill="linen"/&gt;</span>
  &lt;g adj:command="horizontalList" adj:makeGrid="true" adj:maxWidth="200" adj:gap="10" adj:hAlign="center" adj:vAlign="middle"&gt;
    &lt;circle fill="#444" r="25"/&gt;
    &lt;g&gt;
      &lt;circle fill="#ccc" r="25" <span class="example-code">adj:command="<a href="#L2299">fit</a>" adj:maxHeight="20"</span>/&gt;
    &lt;/g&gt;
    &lt;g&gt;
      &lt;circle fill="#ccc" r="25" <span class="example-code">adj:command="fit" adj:maxWidth="40" adj:maxHeight="30"</span>/&gt;
    &lt;/g&gt;
    &lt;g&gt;
      &lt;circle fill="#ccc" r="25" <span class="example-code">adj:command="fit" adj:maxWidth="100"</span>/&gt;
    &lt;/g&gt;
    &lt;g&gt;
      &lt;circle fill="#ccc" r="25" <span class="example-code">adj:command="fit" adj:height="70"</span>/&gt;
    &lt;/g&gt;
    &lt;g&gt;
      &lt;circle fill="#ccc" r="25" <span class="example-code">adj:command="fit" adj:width="120" adj:height="80" adj:maxWidth="40"</span>/&gt;
    &lt;/g&gt;
  &lt;/g&gt;
  &lt;g adj:command="floater" adj:at="0,0" adj:pin="0,0"&gt;
    &lt;adj:variable name="w" value="200"/&gt;
    &lt;adj:variable name="h" value="150"/&gt;
    &lt;path adj:command="vine" stroke="#777" stroke-width="1" opacity="0.2" fill="none" d="
    M 0,10 h ^w
    M 0,20 h ^w
    …
    "/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<p>All command <code>fit</code> parameters are optional.</p>

<p>Scaling is done proportionally for horizontal and vertical. Always the
smallest scale is picked to fulfill all constraints. If parameter
<code>maxWidth</code> and parameter <code>maxHeight</code> would cause two
different scales, the smaller scale is picked.</p>

<p>Other than parameters <code>maxWidth</code> and <code>maxHeight</code>,
parameters <code>width</code> and <code>height</code> can cause a scale larger
than 1.0. Parameters <code>maxWidth</code> and <code>maxHeight</code> never
cause an increase of scale, while parameters <code>width</code> and
<code>height</code> can cause an increase of scale.</p>

<p>Parameters <code>maxWidth</code> and <code>maxHeight</code> can further
constrain than parameters <code>width</code> and <code>height</code>, in case
they have been given along the same axis.</p>

<h3 id="L7600">1.12. Auxiliary Commands</h3>

<h4 id="L7602">1.12.1. Option explain</h4>

<p>The optional parameter <code>explain</code> inserts explanatory elements.</p>

<p>As implemented, <code>explain</code> inserts explanatory elements for
<code>verticalList</code>, <code>horizontalList</code>,
<code>connection</code>, <code>rider</code>, <code>circularList</code>,
<code>verticalTree</code>, <code>vine</code>, and <code>floater</code>.</p>

<table border="1">
  <tbody>
    <tr>
      <td><img alt="example"
        src="adj-ex-041-workflow-version-explained.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  …</span>
  &lt;g&gt;
    &lt;adj:<a href="#L7357">horizontalList</a> makeGrid="true" gap="5" maxPerRow="3" hAlign="center" <span class="example-code">explain="true"</span>/&gt;
    &lt;g adj:id="subject-editor"&gt;
    &lt;adj:horizontalList gap="10"/&gt;
      &lt;rect width="0" height="0" class="subject"&gt;
        &lt;adj:frameForParent inset="1"/&gt;
      &lt;/rect&gt;
      &lt;text&gt;XML editor&lt;/text&gt;
    &lt;/g&gt;
    &lt;g/&gt;
    …
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
        src="adj-ex-023-connection-fromXY-explained.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;rect adj:id="one" x="5" y="5" width="40" height="30" fill="#aaa"/&gt;
  &lt;rect adj:id="other" x="145" y="55" width="40" height="30" fill="#ccc"/&gt;
  &lt;path d="M5,100 q40,10 80,0 t80,0" stroke="#666" stroke-width="2" fill="none"&gt;
    &lt;adj:<a href="#L1740">connection</a> from="one%1,0.5" to="other%0,0.5" <span class="example-code">explain="true"</span>/&gt;
  &lt;/path&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
      src="adj-ex-031-rider-gap-explained.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;rect adj:id="one" x="5" y="5" width="40" height="30" fill="#ddd"/&gt;
    &lt;rect x="85" y="15" width="40" height="30" fill="#ccc"/&gt;
    &lt;rect x="25" y="45" width="40" height="30" fill="#ccc"/&gt;
    &lt;rect adj:id="other" x="145" y="75" width="40" height="30" fill="#bbb"/&gt;
    &lt;g&gt;
      &lt;adj:connection from="one%1,0.5" to="other%0,0.5"/&gt;
      &lt;path d="M45,20q19.265,25.692 50,35t50,35" stroke="#666" stroke-width="2" fill="none"/&gt;
      &lt;rect width="30" height="20" fill="#aaa"&gt;
        &lt;adj:<a href="#L8701">rider</a> at="0.2,0.7" adjust="near" gap="2" <span class="example-code">explain="true"</span>/&gt;
      &lt;/rect&gt;
    &lt;/g&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
        src="adj-ex-040-circularList-rAlign-explained.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="100" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;adj:<a href="#L20521">circularList</a> rAlign="inside" gap="2" <span class="example-code">explain="true"</span>/&gt;
    &lt;circle r="20" fill="#000"/&gt;
    &lt;rect width="3" height="3" fill="#222"/&gt;
    &lt;rect width="6" height="6" fill="#444"/&gt;
    &lt;rect width="9" height="9" fill="#666"/&gt;
    &lt;rect width="12" height="12" fill="#888"/&gt;
    &lt;rect width="15" height="15" fill="#aaa"/&gt;
    &lt;rect width="18" height="18" fill="#bbb"/&gt;
    &lt;rect width="21" height="21" fill="#ccc"/&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
        src="adj-ex-047-verticalTree-hAlign-explained.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="160" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;adj:<a href="#L8469">verticalTree</a> autoParrots="true" hAlign="0.1" vAlign="0.2" gap="12" <span class="example-code">explain="true"</span>/&gt;
    &lt;text adj:id="r-1" font-size="20"&gt;R1&lt;/text&gt;
    &lt;text adj:id="r-2"&gt;R2&lt;/text&gt;
    &lt;text adj:id="l-1-1" font-size="20" adj:treeParent="r-1"&gt;L11&lt;/text&gt;
    &lt;text adj:id="n-1-2" font-size="15" adj:treeParent="r-1"&gt;N12&lt;/text&gt;
    &lt;text adj:id="n-1-2-1" font-size="12" adj:treeParent="n-1-2"&gt;N121&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-1" adj:treeParent="n-1-2-1"&gt;L1211&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-2" adj:treeParent="n-1-2-1"&gt;L1212&lt;/text&gt;
    &lt;text adj:id="l-1-2-1-3" adj:treeParent="n-1-2-1"&gt;L1213&lt;/text&gt;
    &lt;text adj:id="l-1-2-2" adj:treeParent="n-1-2"&gt;L122&lt;/text&gt;
    &lt;text adj:id="l-1-2-3" adj:treeParent="n-1-2"&gt;L123&lt;/text&gt;
    &lt;text adj:id="l-1-3" adj:treeParent="r-1"&gt;L13&lt;/text&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example" src="adj-ex-053-vine-explained.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="180" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;adj:verticalTree leftGap="20" centerGap="30" childlessGap="10" middleGap="40"/&gt;
    &lt;rect adj:id="o1" width="40" height="30" fill="#000"/&gt;
    &lt;rect adj:id="o2" adj:treeParent="o1" width="30" height="20" fill="#666"/&gt;
    &lt;rect adj:id="o3" adj:treeParent="o2" width="25" height="15" fill="#888"/&gt;
    &lt;rect adj:id="o4" adj:treeParent="o2" width="25" height="15" fill="#aaa"/&gt;
    &lt;rect adj:id="o5" adj:treeParent="o1" width="30" height="20" fill="#bbb"/&gt;
    &lt;rect adj:id="o6" adj:treeParent="o5" width="25" height="15" fill="#ccc"/&gt;
    &lt;rect adj:id="o7" adj:treeParent="o5" width="25" height="15" fill="#ddd"/&gt;
  &lt;/g&gt;
  &lt;path d="M0,0" stroke="#777" stroke-width="2" fill="none" adj:d="M ~o1#x - 10, ~o1#yh
  C ~o1#x - 10, ~o1#yh + 10 ~o2#x - 10, ~o2#y%-0.3 ~o2#x - 10, ~o2#cy
  S ~o3#x - 10, ~o3#y%-0.3 ~o3#x - 10, ~o3#cy
  C ~o3#x - 10, ~o3#yh + 10 ~o3#x, ~o3#yh + 10 ~o3#cx, ~o3#yh + 10
  S ~o4#x, ~o4#yh + 10 ~o4#cx, ~o4#yh + 10
  S ~o4#xw + 10, ~o4#yh + 10 ~o4#xw + 10, ~o4#cy
  C ~o4#xw + 10, ~o4#y * 0.5 + ~o2#yh * 0.5 ~o2#xw, ~o2#yh * 0.5 + ~o4#y * 0.5 + 10 ~o2#xw, ~o2#yh * 0.5 + ~o4#y * 0.5
  S ~o2#xw, ~o2#yh * 0.5 + ~o5#yh * 0.5 + 10 ~o2#xw * 0.5 + ~o5#x * 0.5, ~o2#yh * 0.5 + ~o5#yh * 0.5 + 10"&gt;
    &lt;adj:<a href="#L1796">vine</a> <span class="example-code">explain="true"</span>/&gt;
  &lt;/path&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
    <tr>
      <td><img alt="example"
      src="adj-ex-055-floater-pin-explained.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="160" fill="linen"/&gt;</span>
  &lt;g&gt;
    &lt;rect adj:id="one" x="15" y="65" width="40" height="30" fill="#000"/&gt;
    &lt;rect adj:id="other" x="95" y="15" width="40" height="30" fill="#666"/&gt;
    &lt;rect adj:id="another" x="145" y="115" width="40" height="30" fill="#aaa"/&gt;
    &lt;path d="M0,0 l40,0 -20,-50 z" fill="#ccc"&gt;
      &lt;adj:<a href="#L2184">floater</a> pin="0.5,0" at="~one#cx*0.333+~other#cx*0.333+~another#cx*0.333,~one#cy*0.333+~other#cy*0.333+~another#cy*0.333" <span class="example-code">explain="true"</span>/&gt;
    &lt;/path&gt;
  &lt;/g&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<h4 id="L2422">1.12.2. Command explain</h4>

<p>Similar to optional parameter <code><a href="#L7602">explain</a></code>,
command <code>explain</code> inserts explanatory elements for an SVG
<code>path</code> element.</p>

<table border="1">
  <tbody>
    <tr>
      <td><img alt="example" src="adj-ex-056-explain-path.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="120" fill="linen"/&gt;</span>
  &lt;path stroke="#777" stroke-width="2" fill="none" d="M 20,20
    c 20,20 60,20 80,0
    c -20,30 -60,30 -80,0
    m 40,10
    c 40,0 10,60 0,60
    s -40,-60 0,-60"&gt;
    <span class="example-code">&lt;adj:explain/&gt;</span>
  &lt;/path&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<h4 id="L7627">1.12.3. Command relativate</h4>

<p>Command <code>relativate</code> converts the coordinates of a path into
relative coordinates. Can be useful when editing.</p>

<h3 id="L1780">1.13. Referencing By Identifier Attribute</h3>

<p>Using identifier attribute <code>adj:id</code> is simple.</p>

<p>In contrast, here it is explained with more correctness, completeness, and
detail than you were hoping for.</p>

<h4 id="L5174">1.13.1. Need</h4>

<p>Some commands refer to elements by identifier. These include command
<code><a href="#L1740">connection</a></code> parameters <code>from</code> and
<code>to</code>, command <code><a href="#L8701">rider</a></code> parameter
<code>path</code>, command <code><a href="#L8469">verticalTree</a></code> child
element attribute <code>adj:treeParent</code>, command <code><a
href="#L1796">vine</a></code> when evaluating element attribute
<code>adj:d</code>, and command <code><a href="#L2184">floater</a></code> when
evaluating parameter <code>at</code>.</p>

<h4 id="L1807">1.13.2. Attribute adj:id</h4>

<p>The recommended kind of identifier to use is attribute
<code>adj:id</code>.</p>

<p>For attribute <code>adj:id</code> there is <span class="emphasize">no strict
uniqueness requirement</span>. At least not per document. Hence,
<code>adj:id</code> is <span class="emphasize">not</span> of XML attribute type
<code>ID</code>. Values of attribute <code>adj:id</code> should match the XML
Name production.</p>

<p>In addition, Adj version 3.3 still recognizes plain <code>id</code>
attributes. Future versions of Adj may or may not recognize plain
<code>id</code> attributes for identifying elements to commands.</p>

<h4 id="L1842">1.13.3. Function Adj.getElementByIdNearby</h4>

<p>As implemented, command <code>connection</code> parameters <code>from</code>
and <code>to</code>, command <code>rider</code> parameter <code>path</code>,
command <code>vine</code> when evaluating element attribute
<code>adj:d</code><code></code>, and command <code>floater</code> when
evaluating parameter <code>at</code> are using JavaScript function
<code>Adj.getElementByIdNearby</code>.</p>

<p>Function <code>Adj.getElementByIdNearby</code> finds the element with a
given identifier that is nearest to the referencing element, rather than
another element with the same identifier that is further away in the same
document.</p>

<p>A simplified description of an implementation goes: If there is more than
one element with the same identifier, then for each of those elements with the
same identifier their respective common ancestor with the referencing element
is determined, and the one which is the least number of steps away is it.</p>

<p>One benefit is, when copying a fragment of SVG and pasting it into the same
document, references to "nearby" elements within the same structure should
still resolve as one could intuitively expect – to nearby elements. Hence,
graphics structures with Adj commands referring to "nearby" elements within the
same structure should remain intact, even when pasting another copy into the
same document.</p>

<p>Authors could be less worried when creating large documents, by hand or from
a script. Multiple copies of the same structure should not require fixing up
identifiers that are used only within such structure.</p>
<a name="adj-id-nearby"></a> 

<p>An illustration of function <code>Adj.getElementByIdNearby</code> finding
instances of attribute <code><a href="#L1780">adj:id</a></code>:</p>
<img alt="Adj.getElementByIdNearby finding adj:ids"
src="adj-ex-050-getElementByIdNearby.svg"></img> 

<h4 id="L1875">1.13.4. Different Search Strategies</h4>

<p>Command <code>verticalTree</code> child element attribute
<code>adj:treeParent</code> is only looking for identifiers among siblings of
the referencing element. That is more narrow of a search than function
<code>Adj.getElementByIdNearby</code>.</p>

<h3 id="L2629">1.14. Substitution Of Variables</h3>

<table border="1">
  <tbody>
    <tr>
      <td><img alt="example" src="adj-ex-057-variable.svg"></img></td>
      <td><pre class="example-listing"><span class="deemphasize-code">&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj"&gt;
  &lt;rect width="200" height="160" fill="linen"/&gt;</span>
  <span class="example-code">&lt;adj:variable name="myvar" value="10" desc="optional description of variable"/&gt;</span>
  &lt;rect adj:id="one" x="15" y="65" width="40" height="30" fill="#000"/&gt;
  &lt;rect adj:id="other" x="95" y="15" width="40" height="30" fill="#666"/&gt;
  &lt;rect adj:id="another" x="145" y="115" width="40" height="30" fill="#aaa"/&gt;
  &lt;path adj:command="vine" stroke="#777" stroke-width="2" fill="none" d="M0,0" adj:d="
    M ~one#xw + <span class="example-code">^myvar</span>, ~one#cy
    C ~one#xw + <span class="example-code">^myvar</span>, ~one#cy - 20  ~other#cx - 20, ~other#yh + <span class="example-code">^myvar</span>  ~other#cx, ~other#yh + <span class="example-code">^myvar</span>
    S ~another#x - <span class="example-code">^myvar</span>, ~another#cy - 20  ~another#x - <span class="example-code">^myvar</span>, ~another#cy"/&gt;
<span class="deemphasize-code">&lt;/svg&gt;</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<p>The scope of an <code>adj:variable</code> is all descendants of the SVG
element in which it is defined. It is not defined whether an
<code>adj:variable</code> is or is not available in the very SVG element in
which it is defined.</p>

<p>Multiple definitions of a variable by the same name in the same document are
possible, with values of their own. If so, then each one by itself has as scope
all descendants of the SVG element in which it is defined. In case of nested
scopes of variables of the same name, the value used will be the one found
first when searching from use upwards through ancestors.</p>

<p>Substitution of variables also evaluates simple arithmetic into plain
decimal numbers.</p>

<p>Only some parameters of some commands substitute variables:</p>

<table border="1" class="deemphasize">
  <tbody>
    <tr>
      <td><code>horizontalList</code></td>
      <td><code>gap</code>, <code>horizontalGap</code>, <code>leftGap</code>,
        <code>centerGap</code>, <code>rightGap</code>,
        <code>verticalGap</code>, <code>topGap</code>, <code>middleGap</code>,
        <code>bottomGap</code>, <code>maxWidth</code>, <code>maxPerRow</code>,
        <code>hAlign</code>, <code>vAlign</code></td>
    </tr>
    <tr>
      <td><code>verticalList</code></td>
      <td><code>gap</code>, <code>horizontalGap</code>, <code>leftGap</code>,
        <code>centerGap</code>, <code>rightGap</code>,
        <code>verticalGap</code>, <code>topGap</code>, <code>middleGap</code>,
        <code>bottomGap</code>, <code>maxHeight</code>,
        <code>maxPerColumn</code>, <code>hAlign</code>, <code>vAlign</code></td>
    </tr>
    <tr>
      <td><code>frameForParent</code></td>
      <td><code>inset</code>, <code>horizontalInset</code>,
        <code>leftInset</code>, <code>rightInset</code>,
        <code>verticalInset</code>, <code>topInset</code>,
        <code>bottomInset</code></td>
    </tr>
    <tr>
      <td><code>rider</code></td>
      <td><code>gap</code></td>
    </tr>
    <tr>
      <td><code>circleForParent</code></td>
      <td><code>inset</code></td>
    </tr>
    <tr>
      <td><code>ellipseForParent</code></td>
      <td><code>inset</code>, <code>horizontalInset</code>,
        <code>verticalInset</code></td>
    </tr>
    <tr>
      <td><code>circularList</code></td>
      <td><code>gap</code>, <code>rGap</code>, <code>cGap</code>,
        <code>fromAngle</code>, <code>toAngle</code>, <code>rAlign</code>,
        <code>horizontalGap</code>, <code>leftGap</code>,
        <code>rightGap</code>, <code>verticalGap</code>, <code>topGap</code>,
        <code>bottomGap</code></td>
    </tr>
    <tr>
      <td><code>verticalTree</code></td>
      <td><code>gap</code>, <code>horizontalGap</code>, <code>leftGap</code>,
        <code>centerGap</code>, <code>rightGap</code>,
        <code>childlessGap</code>, <code>earGap</code>,
        <code>verticalGap</code>, <code>topGap</code>, <code>middleGap</code>,
        <code>bottomGap</code>, <code>hAlign</code>, <code>vAlign</code></td>
    </tr>
    <tr>
      <td><code>horizontalTree</code></td>
      <td><code>gap</code>, <code>horizontalGap</code>, <code>leftGap</code>,
        <code>centerGap</code>, <code>rightGap</code>,
        <code>verticalGap</code>, <code>topGap</code>, <code>middleGap</code>,
        <code>bottomGap</code>, <code>childlessGap</code>, <code>earGap</code>,
        <code>hAlign</code>, <code>vAlign</code></td>
    </tr>
    <tr>
      <td><code>fit</code></td>
      <td><code>maxWidth</code>, <code>maxHeight</code>, <code>width</code>,
        <code>height</code></td>
    </tr>
  </tbody>
</table>

<p>Command <code><a href="#L1796">vine</a></code> also performs substitution of
variables.</p>

<p>Some parameters of some commands substitute variables with boolean
<code>true</code> or <code>false</code>:</p>

<table border="1" class="deemphasize">
  <tbody>
    <tr>
      <td><code>horizontalList</code></td>
      <td><code>makeGrid</code>, <code>explain</code></td>
    </tr>
    <tr>
      <td><code>verticalList</code></td>
      <td><code>makeGrid</code>, <code>explain</code></td>
    </tr>
    <tr>
      <td><code>connection</code></td>
      <td><code>explain</code></td>
    </tr>
    <tr>
      <td><code>rider</code></td>
      <td><code>explain</code></td>
    </tr>
    <tr>
      <td><code>circularList</code></td>
      <td><code>explain</code></td>
    </tr>
    <tr>
      <td><code>verticalTree</code></td>
      <td><code>autoParrots</code>, <code>explain</code></td>
    </tr>
    <tr>
      <td><code>horizontalTree</code></td>
      <td><code>autoParrots</code>, <code>explain</code></td>
    </tr>
    <tr>
      <td><code>vine</code></td>
      <td><code>explain</code></td>
    </tr>
    <tr>
      <td><code>floater</code></td>
      <td><code>explain</code></td>
    </tr>
  </tbody>
</table>

<p>There is at least one real use <a
href="adj-ex-058-walking-svg-tree.svg">example file</a> with substitution of
variables.</p>

<h3 id="L2572">1.15. Issuing Commands Via adj: Attributes Instead Of Via adj:
Elements</h3>

<p>A newly implemented alternative syntax allows Adj commands to be attributes
of SVG elements instead of requiring them to be XML elements of their own. This
can be convenient for authors. Arguably there are distinct flavors of clarity
in using the two different syntaxes. Both syntaxes are supported in the
foreseeable future.</p>

<table border="1">
  <tbody>
    <tr>
      <td><p><code>adj:</code> elements<br />
        </p>

        <p>original, still OK to write this way</p>
      </td>
      <td><pre class="example-listing">&lt;g&gt;
  <span class="example-code">&lt;adj:verticalList hAlign="center"/&gt;</span>
  &lt;rect width="60" height="40"&gt;
    <span class="example-code">&lt;adj:frameForParent inset="0.5"/&gt;</span>
  &lt;/rect&gt;
  &lt;text&gt;innermost&lt;/text&gt;
  &lt;text&gt;one&lt;/text&gt;
&lt;/g&gt;</pre>
      </td>
    </tr>
    <tr>
      <td><code>adj:</code> attributes<br />
        <br />
        new, OK to write</td>
      <td><pre class="example-listing">&lt;g <span class="example-code">adj:command="verticalList" adj:hAlign="center"</span>&gt;
  &lt;rect <span class="example-code">adj:command="frameForParent" adj:inset="0.5"</span> width="60" height="40"/&gt;
  &lt;text&gt;innermost&lt;/text&gt;
  &lt;text&gt;one&lt;/text&gt;
&lt;/g&gt;</pre>
      </td>
    </tr>
  </tbody>
</table>

<p>This user guide contains at least one set of images which while similar in
content have been written <a href="adj-ex-052-nesting.svg">one</a> with
commands via <code>adj:</code> attributes versus <a
href="adj-ex-052-nesting-larger.svg">the other</a> with commands via
<code>adj:</code> elements. More examples of commands via <code>adj:</code>
attributes are <a href="adj-ex-060-fit.svg">here</a>.</p>

<p>Despite at least a theoretical, but also avoidable, risk involving identical
parameter names in future extensions, the benefits of commands via
<code>adj:</code> attributes appear to be worth it.</p>

<h3 id="L2579">1.16. Command Combinations</h3>

<p>Some commands make sense to combine for the same SVG element. Others don't
make sense, and others would be plain impossible.</p>

<p>It makes sense to combine <code>textBreaks</code> and
<code>horizontalList</code>, for the same SVG element.</p>

<p>It could make sense, for example, to combine <code>verticalList</code> or
<code>horizontalList</code> with <code>rider</code> or <code>floater</code>.</p>

<p>Obviously it would <span class="emphasize">not</span> make sense to combine
<code>horizontalList</code> and <code>verticalList</code>, for the same SVG
element. It wouldn't make sense to combine <code>connection</code> and
<code>rider</code>, for the same SVG element. It wouldn't make sense to combine
<code>rider</code> and <code>floater</code>, for the same SVG element.</p>

<p>Mentioned because maybe not obvious: It makes <span
class="emphasize">no</span> sense to combine <code>vine</code> and
<code>floater</code>.</p>

<p>There is no complete list. Factual <a href="#L4276">feedback</a> about
noteworthy combinations, maybe example files, from authors using Adj is
welcome.</p>

<h3 id="L1888">1.17. Complete Authoring Workflow</h3>

<p>An author may increase productivity by using browser add-ons.</p>

<p>It is noted that those who don't like using existing Firefox add-ons could
implement alternate workflows and tools to support such workflows. E.g. Chrome
extensions. The product of authoring should not depend on the brand of
auxiliary authoring tools used.</p>
<a name="example-workflow-description"></a> 

<p>An example workflow:</p>
<ul>
  <li>Requirements 
    <ul>
      <li>an XML editor<span class="deemphasize">, e.g. awesome <span
        class="product-name">Altova <a
        href="http://www.altova.com/xml-editor/">XMLSpy</a></span>, <span
        class="product-name">Adobe <a
        href="http://www.adobe.com/products/dreamweaver.html">Dreamweaver</a></span>,
        free <span class="product-name">ActiveState <a
        href="http://www.activestate.com/komodo-edit">Komodo Edit</a></span>
        for Windows, Mac, Linux</span></li>
      <li>a <span class="product-name"><a
        href="https://www.mozilla.org/firefox/#desktop">Firefox</a></span><span
        class="deemphasize">, e.g. version 16 in Windows, version 10 in
        Linux</span></li>
      <li>Firefox add-ons 
        <ul>
          <li><span class="product-name">Auto Reload</span>, from <a
            href="https://addons.mozilla.org/en-US/firefox/addon/auto-reload/">https://addons.mozilla.org/en-US/firefox/addon/auto-reload/</a><span
            class="deemphasize">, e.g. version 1.13</span></li>
          <li><span class="product-name">Save Back to File from DOM</span>, aka
            <code>save-back-to-file-from-dom.xpi</code>, from <a
            href="https://addons.mozilla.org/en-US/firefox/addon/save-back-to-file-from-dom/">https://addons.mozilla.org/en-US/firefox/addon/save-back-to-file-from-dom/</a><span
            class="deemphasize">, e.g. 1.rev22</span></li>
          <li>only if wanting implicit <a href="#L6329">invocation</a> then –
            <span class="product-name">Onload Script Some Document
            Files</span>, aka
            <code>onload-script-some-document-files.xpi</code>, from <a
            href="https://addons.mozilla.org/en-US/firefox/addon/onload-script-some-documents/">https://addons.mozilla.org/en-US/firefox/addon/onload-script-some-documents/</a><span
            class="deemphasize">, e.g. 1.rev42</span> – not needed for
            explicit invocation</li>
        </ul>
      </li>
      <li>Set up a directory which will contain files</li>
      <li>Make sure that directory contains a subdirectory with a file
        <code>.adj-js/adj.js</code>, which is a copy of <span
        class="emphasize">the essential <code>adj.js</code> file from this
        project</span></li>
    </ul>
  </li>
  <li>Steps 
    <ul>
      <li>write SVG in XML editor</li>
      <li>save to disk</li>
      <li>open in <span class="product-name">Firefox</span> browser</li>
      <li>watch the effects of invocation <span class="deemphasize">– if
        implicit invocation then courtesy of the <span
        class="product-name">Onload Script Some Document Files</span>
        add-on</span></li>
      <li>keep fixing SVG in editor and saving to disk</li>
      <li>keep watching the effects of automatic reloading, courtesy of the
        <span class="product-name">Auto Reload</span> add-on</li>
      <li>when done click the <span class="product-name">Save Back to File from
        DOM</span> add-on icon or select the <span class="product-name">Save
        Back to File from DOM</span> context menu item to save the Adj modified
        SVG back into the file, for document distribution without the Adj
        JavaScript library</li>
    </ul>
  </li>
</ul>
<a name="example-workflow"></a> 

<p>A diagram of this <a href="#example-workflow-description">example
workflow</a>:</p>
<a href="adj-ex-041-workflow.svg"><img alt="example workflow"
src="adj-ex-041-workflow.png" /></a> 

<p class="deemphasize">Only a PNG here to accommodate a browser limitation,
with a <a href="adj-ex-041-workflow.svg">link to SVG</a>.</p>

<p><span class="todo">TODO: make short video how simple and fun this workflow
is to use <span class="deemphasize">and to set up</span></span></p>

<h3 id="L6329">1.18. Invocation</h3>

<h4 id="L6331">1.18.1. Explicit Invocation</h4>

<p>As implemented, Adj is a JavaScript library.</p>

<p>At first, Adj had to be invoked explicitly, e.g. like</p>
<pre class="example-listing">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11-flat-20030114.dtd"&gt;
&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj" xmlns:xlink="http://www.w3.org/1999/xlink" <span class="example-code">onload="Adj.doDoc();"</span>&gt;
  <span class="example-code">&lt;script type="text/javascript" xlink:href="js/adj.js"/&gt;</span>
  &lt;g&gt;…</pre>

<p>Obviously, there must be a correct reference (path) to a copy of <span
class="emphasize">the essential <code>adj.js</code> file from this
project</span>.</p>

<h4 id="L6345">1.18.2. Implicit Invocation</h4>

<p>With script injection, explicit invocation can be avoided.</p>

<p>As an example implementation, the Firefox <a
href="https://addons.mozilla.org/en-US/firefox/addon/onload-script-some-documents/">add-on</a>
<span class="product-name">Onload Script Some Document Files</span> can do the
necessary script injection, effecting implicit invocation.</p>

<h4 id="L10156">1.18.3. No Invocation – If Saving Processed Document</h4>

<p>If chosen to do so, with an author saving a processed document, invocation
in users' browsers can be avoided.</p>

<p>As an example implementation, the Firefox <a
href="https://addons.mozilla.org/en-US/firefox/addon/save-back-to-file-from-dom/">add-on</a>
<span class="product-name">Save Back to File from DOM</span> can do the
necessary saving, obviating invocation.</p>

<p>An <a href="#example-workflow-description">example workflow</a> <span
class="emphasize">combining both implicit invocation and saving processed
documents</span> has been described <a
href="#example-workflow-description">above</a>.</p>

<p>Avoiding invocation in users' browsers may mean less problems with viewing
in users' browsers that are set not to allow script invocation.</p>

<p>Avoiding invocation in users' browsers also means <span class="emphasize">no
need to distribute the Adj JavaScript library</span>.</p>

<p>One downside, however, of not distributing the Adj JavaScript library is
inability to dynamically adjust, e.g. to different fonts available in a
different browser instance. This may be an acceptable compromise.</p>

<h3 id="L86788">1.19. More Details</h3>

<h4 id="L123304">1.19.1. Using SVG Group Element g</h4>

<p>Judicious use of SVG group elements <code>g</code> makes Adj quite
practical.</p>

<p><span class="todo">TODO: some good examples</span></p>

<h4 id="L123314">1.19.2. Overwriting Preexisting Transform Attributes</h4>

<p>When Adj inserts a <code>transform</code> attribute it overwrites a
preexisting <code>transform</code> attribute, if any.</p>

<p>This is actually quite practical when transformations are changing, and the
preexisting transformation has been the older version.</p>

<p>If indeed a separate transformation is needed, one possible solution seems
to be applying it as appropriate at a parent or child element, possibly at a
dedicate group element <code>g</code>.</p>

<p><span class="todo">TODO: a good example</span></p>

<h4 id="L123334">1.19.3. Transforming An SVG Path</h4>

<p>For a <code>connection</code> its content may be scaled and rotated. This is
different than merely moving around an element, which can be and is done by an
arguably simpler translation transformation.</p>

<h5 id="L123341">1.19.3.1. Changing Points</h5>

<p>For transforming an SVG <code>path</code> or <code>line</code> element in a
<code>connection</code> Adj changes the coordinates of its points. For
transforming an SVG <code>path</code> or <code>line</code> element in a
<code>connection</code> Adj does not insert <code>transform</code>
attributes.</p>

<p>This has been implemented this way because scaling effectively changes
stroke width, which is undesirable. <span class="deemphasize">The issue of
scaling and stroke width has been discussed for SVG version 2, which is far
out.</span></p>

<h5 id="L6338">1.19.3.2. Storing Away Authoring Coordinates</h5>

<p>Essential authoring coordinates are <a href="#L443">stored away</a> in Adj
namespace attributes, for reuse by authors and algorithms.</p>

<p>Algorithms which store away authoring coordinates also look for authoring
coordinates in Adj namespace attributes, and if present use the values of Adj
namespace attributes rather than equivalent SVG attributes.</p>

<h5 id="L123364">1.19.3.3. In connection Arcs Are Not Supported</h5>

<p>As implemented, other than straight lines and curves, arcs in an SVG
<code>path</code> element in a <code>connection</code> don't get handled
correctly by Adj. As implemented, Adj replaces such arcs, if any, by straight
lines. This could be improved depending on user feedback.</p>

<h4 id="L4599">1.19.4. Exception Handling</h4>

<p>A visual display is provided instead of the expected SVG in case a
JavaScript exception occurs in an invocation of <code>Adj.doDoc();</code>.</p>

<h4 id="L2915">1.19.5. Bad Command Handling</h4>

<p>As a matter of practicality, if authors reload documents after each change,
they should be able to quickly know whether their most recent incremental
change has the desired effect, doesn't have the desired effect, has bad syntax,
or is otherwise defective.</p>

<p>Some cases are handled well already. This works with a visual display of <a
href="#L4599">exceptions</a>.</p>

<p>Bad command handling can further be improved with <a
href="#L4276">feedback</a> from authors using Adj. Frequent, puzzling, time
consuming, and painful cases should have priority.</p>

<p>It should be considered though, absolute perfection in bad command handling
may not be a goal: A library providing help for every theoretically possible
authoring issue would be significantly larger, which means more expensive to
produce, to maintain, and using more resources and time to download, and to
execute.</p>

<h3 id="L4606">1.20. Helpful Hints</h3>

<h4 id="L4608">1.20.1. Defining An SVG rect Element</h4>

<p>When defining an SVG <code>rect</code> element which will be sized and
positioned by Adj, e.g. by a <code>frameForParent</code>, it is possible to be
minimalist.</p>

<p>An SVG <code>rect</code> element only needs a <code>width</code> and
<code>height</code> attribute, which can be zero. An SVG <code>rect</code>
element needs neither an <code>x</code> nor a <code>y</code> attribute.</p>

<h4 id="L4638">1.20.2. Considerations For Nesting</h4>

<p><span class="todo">TODO: describe special limitations or benefits, if
any</span></p>

<h3 id="L2289">1.21. Extending SVG With The Adj Namespace</h3>

<p>For standards compliant <a
href="http://www.w3.org/TR/SVG/extend.html">extension of SVG</a>, Adj uses <a
href="http://www.w3.org/TR/REC-xml-names/">XML namespace</a>
<code>http://www.nrvr.com/2012/adj</code> with preferred prefix
<code>adj</code>, as declared in
<code>xmlns:adj="http://www.nrvr.com/2012/adj"</code>.</p>

<h3 id="L6360">1.22. Alternate Syntax – JavaScript Instead Of XML</h3>

<p>It is expected that authors will prefer the concise form Adj syntax, which
is prevalently used in this documentation, over more verbose JavaScript
function calls.</p>

<p>Nevertheless, via JavaScript function calls someone interested could invoke
the Adj JavaScript library as needed, partially or wholly.</p>

<p>One entry point could be explicit invocation with
<code>Adj.doDoc();</code>.</p>

<p>Similarly, an entry point could be explicit invocation with
<code>Adj.doSvg(svgElement);</code>.</p>

<p>Another kind of entry point could be the setting of algorithms to be applied
to an element. E.g. the concise form Adj command</p>
<pre class="example-listing">&lt;adj:horizontalList makeGrid="true" hAlign="center" vAlign="middle" maxPerRow="3" gap="5"/&gt;</pre>

<p>actually gets converted into, could have been written as, and gets
interpreted as JavaScript</p>
<pre class="example-listing">Adj.setAlgorithm(this, 'horizontalList', {makeGrid:true, hAlign:'center', vAlign:'middle', maxPerRow:3, gap:5});</pre>

<p>Some details of the syntax of Adj may change after <a
href="#L4276">feedback</a> from authors using it.</p>

<h3 id="L123374">1.23. Implementation Details</h3>

<p>This may matter to some authors.</p>

<h4 id="L2440">1.23.1. Need Driven</h4>

<p>How Adj is implemented partially has been a function of what needs it was
supposed to fulfill. Drawing, specifically in engineering, often has meant
abstraction. Photographic realism has its place, but it is not a topic here.
Available size of drawing surfaces often has been a limitation. Limitations of
medium effect limitations of content represented. On large <a
href="http://en.wikipedia.org/wiki/Drawing_board">drawing boards</a> of past
centuries the area available often was an order of magnitude larger than on
contemporary computer displays. Adj has been designed to facilitate creation
and long-term maintenance of system diagrams, specifically for diagrams of
large complexity. <span class="deemphasize">This is a different motivation and
sets different priorities than what for nontechnical and technical users has
been prevalent since the second half of the twentieth century: The low
resolutions and small sizes of television screens, computer monitors, cell
phones, and more recently mobile tablets. Arguably those screens combined with
software such as PowerPoint have <a
href="http://www.edwardtufte.com/tufte/books_pp">influenced</a> the thinking of
many.</span></p>

<p>Adj prioritizes the showing of <span class="emphasize">all</span> necessary
information. Adj facilitates representation and communication of complexity.</p>

<p>How to organize rich sets of relevant detail?</p>

<p>In Adj the metaphor is a large sheet that expands as needed, when more
information gets added. Expansion is in both dimensions, x and y.</p>

<p class="deemphasize">In contrast, in word processing, the metaphor is a
sufficiently long scroll of paper, continuous for a webpage, paginated for
printing: When more information gets inserted, the scroll gets longer, the
webpage gets longer, more pages will be printed. In most presentation programs,
detail must go on other slides, or might be rephrased to fit.</p>

<p>Change happens.</p>

<p>To accommodate change, Adj facilitates diagrams being updated in ways that
maintain perfect looks. Adj facilitates automated propagation of change, both
change of content and change of appearance.</p>

<p class="deemphasize">In contrast, without Adj, large and complex diagrams,
and large sets of diagrams, could become outdated too quickly. The cost of
updating diagrams can become prohibitive. Editing change into a diagram too
easily can destroy an appearance of perfection that has been achieved in a
first version.</p>

<p>Adj also may facilitate linking, scripting, and folding.</p>

<p>Undeniably, while Adj users will enjoy using large and very large computer
displays, large images for some users will require panning, zooming, and
possibly folding.</p>

<h4 id="L2469">1.23.2. Sizing From Small Parts To Whole Image</h4>

<p>One of the first patterns implemented in Adj has been collections of
graphics objects, such as <a href="#L7357">lists</a> in <a
href="#L20521">different</a> shapes. As implemented, on purpose, these
collections resize to accommodate the size, number, and desired relative
positions of their contents elements.</p>

<table border="1">
  <tbody>
    <tr>
      <td>before</td>
      <td><img alt="nested collections" src="adj-ex-052-nesting.svg"></img></td>
    </tr>
    <tr>
      <td colspan="2">insertion</td>
    </tr>
    <tr>
      <td>after</td>
      <td><img alt="nested collections with additional contents"
        src="adj-ex-052-nesting-larger.svg"></img></td>
    </tr>
  </tbody>
</table>

<p>Instead of "these collections resize" one could think "these collections are
resized". Whether one considers collections resizing themselves or being
resized by Adj depends on one's point of view: Whether one focuses on the
effect, a user's, a graphics author's, an SVG point of view (resize), versus
whether one pays attention to details of how it is done, an implementer's, a
programmer's, a JavaScript point of view (are resized).</p>

<p>The size of the smallest parts, the leaves of the SVG element tree, which
are <span class="emphasize">not</span> collections themselves, e.g. text, are
found by asking SVG for the bounding box. Only when the sizes of all siblings
are known then they can be laid out within their parent (the collection) and
then the parent's (the collection's) size can be known. Adj collections
automatically do such sizing, so <span class="emphasize">authors don't</span>
have to.</p>

<h4 id="L123378">1.23.3. Execution Path</h4>

<p>With nested collections the size of the smallest parts, the leaves of the
SVG element tree, which are <span class="emphasize">not</span> collections
themselves, e.g. text, are found by asking SVG for the bounding box. When
walking the SVG element tree, only when the sizes of all siblings are known
then they can be laid out within their parent (the collection) and then the
parent's (the collection's) size can be known.</p>
<img alt="walking SVG tree" src="adj-ex-058-walking-svg-tree.svg"></img> 

<p>Hence, in a first walk of the SVG element tree Adj collections are laid
out.</p>

<p>To perform all commands, Adj walks the SVG element tree 3 times, in 3
phases:</p>

<table border="1">
  <tbody>
    <tr>
      <th>phaseHandlerName</th>
      <th>algorithmName</th>
    </tr>
    <tr>
      <td><code>adjPhase1Down</code></td>
      <td><code>textBreaks</code>, <code>relativate</code></td>
    </tr>
    <tr>
      <td><code>adjPhase1Up</code></td>
      <td><code>verticalList</code>, <code>horizontalList</code>,
        <code>circularList</code>, <code>verticalTree</code>,
        <code>horizontalTree</code></td>
    </tr>
    <tr>
      <td><code>adjPhase4Down</code></td>
      <td><code>frameForParent</code>, <code>circleForParent</code>,
        <code>ellipseForParent</code></td>
    </tr>
    <tr>
      <td><code>adjPhase4Up</code></td>
      <td><code>connection</code></td>
    </tr>
    <tr>
      <td><code>adjPhase7</code> with <br />
        <code>processSubtreeOnlyInPhaseHandler</code></td>
      <td><code>rider</code>, <code>floater</code></td>
    </tr>
    <tr>
      <td><code>adjPhase7Up</code></td>
      <td><code>vine</code>, <code>explain</code></td>
    </tr>
  </tbody>
</table>

<p>The 3 phases <code>adjPhase1</code>, <code>adjPhase4</code>, and
<code>adjPhase7</code> are known to developers of Adj commands (algorithms).
Their numbers have been spaced out without impending necessity.</p>
<img alt="walking SVG tree multiple times"
src="adj-ex-059-walking-svg-tree-multiple.svg"></img> 

<p>In addition, there are <span class="deemphasize">unnamed</span>
administrative walks of the SVG element tree.</p>

<p class="deemphasize">Phases have been a simple solution to ensure order of
execution. Regrettably, phases impose some limitations of what can be done. A
list of limitations has not been compiled yet. To get one started, factual <a
href="#L4276">feedback</a> about noteworthy limitations, if encountered,
preferably with example files, is welcome.</p>

<p class="deemphasize">A future implementation may or may not be structured
differently, hopefully with less limitations. For the foreseeable future,
however, this is it. Required effort and consideration for authors with
existing documents are reducing the probability of gratuitous changes.</p>

<h4 id="L3845">1.23.4. More Implementation Details</h4>

<p>There should be more architectural information, implementation insights, and
usage hints available from the original authors. <a
href="file:///D:/nrvr2012gitrepos/adj/adj-js/user-docs/index.html#L4276">Ask</a>
specific questions to justify the effort of documenting more details.</p>

<h3 id="L3983">1.24. Extending Adj With Your Own Commands And Algorithms</h3>

<p>A first example of extending Adj with commands (algorithms) has been given
in the <code><a href="contrib/index.html">user-docs/contrib</a></code>
directory with command <code><a
href="contrib/random/index.html">randomTilt</a></code>.</p>

<p>There should be more information, insights, and hints available from the
original authors. <a
href="file:///D:/nrvr2012gitrepos/adj/adj-js/user-docs/index.html#L4276">Ask</a>
specific questions to justify the effort of documenting more details.</p>

<h3 id="L2357">1.25. Automated Testing</h3>

<p>To facilitate continuing compatibility as both Adj and browsers are moving
along with respective new versions and code changes, an automated test suite
has been <a href="tests.html">implemented here</a>.</p>

<p>For a set of somewhat prepared test documents, freshly computed results of
Adj processing are compared with expected results.</p>

<p>Images that are made from graphic elements without text, hence not using
fonts, should produce exactly the same results each time in each browser.
Variations in less significant digits do occur and are tolerated in order to
pass.</p>

<p>For images that contain text, an explicitly provided font should<span
class="deemphasize">, someday hopefully will,</span> allow achieving the same
results each time in each browser as well. Out of necessity, however<span
class="deemphasize">, for now,</span> when text is present, larger variations
are tolerated in order to pass.</p>

<p>At the time of the writing of this section, for the release of Adj version
3.5, annoying variations appear to occur in Firefox, which is at version 18.</p>

<p>For contributing to increasing the number of test cases, or with questions,
please use contact and/or repository info provided <a
href="#L4276">above</a>.</p>

<p><span class="todo">TODO: describe use of
<code>Adj.doDocAndStashIfNoStashYet()</code> instead of
<code>Adj.doDoc()</code> for preparing documents for testing</span></p>

<h3 id="L2374">1.26. Compatibility Issues</h3>

<p>At the time of the writing of this section, for the release of Adj version
3.0, there are compatibility problems with Internet Explorer.</p>

<p>Not all is lost though, Internet Explorer appears to be moving into the
right direction.</p>

<p>Hence, for now, good results can be achieved with Firefox, Chrome, and
Safari, while improvements in Internet Explorer are expected but cannot be
predicted.</p>

<h4 id="L2433">1.26.1. Internet Explorer 8 And Earlier</h4>

<p>No go before Internet Explorer 9.</p>

<h4 id="L2437">1.26.2. Internet Explorer 9</h4>

<p>Probably since Adj version 2.0 in Internet Explorer 9, correctness appears
broken when using a <code>line</code> or a <code>path</code> in a
<code>connection</code> that has <a href="#L1888">saved back</a> different
values for the coordinates in attributes <code>x1</code>, <code>y1</code>,
<code>x2</code>, <code>y2</code>, or <code>d</code> than what has been <a
href="#L443">stored away</a> as <a href="#L123334">authoring coordinates</a>.
The problem appears to be around use of <code>setAttributeNS</code>, possibly
<code>getAttributeNS</code> and related functions. Apparently Internet Explorer
10 no longer has this problem.</p>

<h4 id="L2480">1.26.3. Internet Explorer 10</h4>

<p>Apparently in at least one pre-release of Internet Explorer 10, correctness
is broken when using a <code>line</code> or a <code>path</code> in a
<code>connection</code> that uses markers such as <code>marker-start</code>,
<code>marker-mid</code>, or <code>marker-end</code>, for example for an
arrowhead. Others also have <a
href="http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/f772aab3-5ce3-4367-8eec-4fe58ad94b14">found
a defect</a> where Internet Explorer 10 doesn't move markers when changing
coordinates of a <code>line</code>. If you have a moment, please comment <a
href="http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/f772aab3-5ce3-4367-8eec-4fe58ad94b14">there</a>
(or even better in an actual defect reporting system at Microsoft if you know
where that would be) in support of that defect being fixed. Someone tries to
take that forum discussion the direction of "this isn't a problem", while not
even using a marker in counterarguments.</p>

<p>There is at least one <a href="adj-ex-041-workflow-version.svg">example
file</a> which should show some or all of these problems. To see problems,
because of security settings of some Internet Explorer versions, one may have
to explicitly click to approve the Adj JavaScript library to run.</p>

<p>These issues must not be showstoppers.</p>

<p>There is no going back. Older versions of Adj are no longer compatible with
more recent development.</p>

<h3 id="L1688">1.27. Example Files</h3>

<h4 id="L5397">1.27.1. Example File 001 Source Code</h4>

<p>The source code, before <a
href="adj-ex-041-workflow-version-pure.svg">processing</a>, of this older
version</p>
<img alt="example workflow" src="adj-ex-041-workflow-version.svg"></img> 

<p>of <a href="#example-workflow">above</a> diagram of the example workflow:</p>
<pre class="example-listing">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:adj="http://www.nrvr.com/2012/adj" xmlns:xlink="http://www.w3.org/1999/xlink"
     onload="Adj.doDoc();" width="200" height="120"&gt;
    &lt;script type="text/javascript" xlink:href="js/adj.js"/&gt;
    &lt;title&gt;Example Workflow&lt;/title&gt;
    &lt;!-- Illustration idea and first version - Leo Baschy &lt;srguiwiz12 AT nrvr DOT com&gt; --&gt;
    &lt;style type="text/css"&gt;&lt;![CDATA[
    svg {
        font-size: 12px;
        font-family: sans-serif;
    }
    .subject {
        fill: lightgray;
        opacity: 0.5;
        stroke: gray;
    }
    .arrow {
        stroke: gray;
        fill: none;
    }
]]&gt;&lt;/style&gt;
    &lt;defs&gt;
        &lt;marker id="arrowhead" class="arrow" markerUnits="strokeWidth" orient="auto"
                viewBox="-4 -2 5 4" refX="0" refY="0" markerWidth="5" markerHeight="4" stroke-width="1" fill="none"&gt;
            &lt;path d="M -3 1 L 0 0 L -3 -1"/&gt;
        &lt;/marker&gt;
    &lt;/defs&gt;
    &lt;g&gt;
        &lt;adj:horizontalList makeGrid="true" gap="5" maxPerRow="3" hAlign="center"/&gt;
        &lt;g adj:id="subject-editor"&gt;
            &lt;adj:horizontalList gap="10"/&gt;
            &lt;rect width="0" height="0" class="subject"&gt;
                &lt;adj:frameForParent inset="1"/&gt;
            &lt;/rect&gt;
            &lt;text&gt;XML editor&lt;/text&gt;
        &lt;/g&gt;
        &lt;g/&gt;
        &lt;g/&gt;
        &lt;g/&gt;
        &lt;g&gt;
            &lt;rect width="50" height="50" fill="none"/&gt;
        &lt;/g&gt;
        &lt;g/&gt;
        &lt;g adj:id="subject-disk"&gt;
            &lt;adj:horizontalList gap="10"/&gt;
            &lt;rect width="0" height="0" class="subject"&gt;
                &lt;adj:frameForParent inset="1"/&gt;
            &lt;/rect&gt;
            &lt;text&gt;disk&lt;/text&gt;
        &lt;/g&gt;
        &lt;g/&gt;
        &lt;g adj:id="subject-author"&gt;
            &lt;adj:horizontalList gap="10"/&gt;
            &lt;rect width="0" height="0" class="subject"&gt;
                &lt;adj:frameForParent inset="1"/&gt;
            &lt;/rect&gt;
            &lt;text&gt;author&lt;/text&gt;
        &lt;/g&gt;
        &lt;g/&gt;
        &lt;g&gt;
            &lt;rect width="50" height="150" fill="none"/&gt;
        &lt;/g&gt;
        &lt;g/&gt;
        &lt;g adj:id="subject-firefox"&gt;
            &lt;adj:horizontalList gap="10"/&gt;
            &lt;rect width="0" height="0" class="subject"&gt;
                &lt;adj:frameForParent inset="1"/&gt;
            &lt;/rect&gt;
            &lt;text&gt;Firefox&lt;/text&gt;
            &lt;g&gt;
                &lt;adj:horizontalList gap="10"/&gt;
                &lt;g adj:id="add-on-auto-reload"&gt;
                    &lt;adj:verticalList gap="5"/&gt;
                    &lt;rect width="0" height="0" class="subject"&gt;
                        &lt;adj:frameForParent inset="1"/&gt;
                    &lt;/rect&gt;
                    &lt;text&gt;Auto Reload&lt;/text&gt;
                    &lt;text&gt;add-on&lt;/text&gt;
                &lt;/g&gt;
                &lt;g adj:id="add-on-onload-script"&gt;
                    &lt;adj:verticalList gap="5"/&gt;
                    &lt;rect width="0" height="0" class="subject"&gt;
                        &lt;adj:frameForParent inset="1"/&gt;
                    &lt;/rect&gt;
                    &lt;text&gt;Onload Script&lt;/text&gt;
                    &lt;text&gt;Document Files&lt;/text&gt;
                    &lt;text&gt;add-on&lt;/text&gt;
                &lt;/g&gt;
                &lt;g adj:id="add-on-save-back"&gt;
                    &lt;adj:verticalList gap="5"/&gt;
                    &lt;rect width="0" height="0" class="subject"&gt;
                        &lt;adj:frameForParent inset="1"/&gt;
                    &lt;/rect&gt;
                    &lt;text&gt;Save Back to File&lt;/text&gt;
                    &lt;text&gt;from DOM&lt;/text&gt;
                    &lt;text&gt;add-on&lt;/text&gt;
                &lt;/g&gt;
            &lt;/g&gt;
        &lt;/g&gt;
        &lt;g&gt;
            &lt;adj:connection from="subject-editor % 0.2, 1.2" to="subject-disk % 0.2, -0.2"/&gt;
            &lt;path class="arrow" d="M0,0 q50,10 100,0" stroke-width="3" marker-end="url(#arrowhead)"/&gt;
            &lt;g&gt;
                &lt;adj:rider at="0.4" pin="1.1,0.5"/&gt;
                &lt;adj:verticalList gap="1"/&gt;
                &lt;text&gt;saves&lt;/text&gt;
            &lt;/g&gt;
        &lt;/g&gt;
        &lt;g&gt;
            &lt;adj:connection from="subject-disk % 0.2, 1.2" to="subject-firefox % 0.1, -0.2"/&gt;
            &lt;path class="arrow" d="M0,0 q50,10 100,0" stroke-width="3" marker-end="url(#arrowhead)"/&gt;
            &lt;g&gt;
                &lt;adj:rider at="0.4" pin="1,1"/&gt;
                &lt;adj:verticalList gap="1"/&gt;
                &lt;text&gt;first time&lt;/text&gt;
                &lt;text&gt;opens&lt;/text&gt;
            &lt;/g&gt;
        &lt;/g&gt;
        &lt;g&gt;
            &lt;adj:connection from="subject-disk % 0.4, 1.2" to="add-on-auto-reload % 0.6, -0.1"/&gt;
            &lt;path class="arrow" d="M0,0 q50,10 100,0" stroke-width="3" marker-end="url(#arrowhead)"/&gt;
            &lt;g&gt;
                &lt;adj:rider at="0.9" pin="1,1"/&gt;
                &lt;adj:verticalList gap="1"/&gt;
                &lt;text&gt;auto&lt;/text&gt;
                &lt;text&gt;reloads&lt;/text&gt;
            &lt;/g&gt;
        &lt;/g&gt;
        &lt;g&gt;
            &lt;adj:connection from="add-on-onload-script % 0.2, -0.05" to="add-on-onload-script % 0.8, -0.05"/&gt;
            &lt;path class="arrow" d="M0,0 q50,-50 100,0" stroke-width="3" marker-end="url(#arrowhead)"/&gt;
            &lt;g&gt;
                &lt;adj:rider at="0.5" pin="0.5,1"/&gt;
                &lt;adj:verticalList gap="1"/&gt;
                &lt;text&gt;on load&lt;/text&gt;
                &lt;text&gt;runs script&lt;/text&gt;
            &lt;/g&gt;
        &lt;/g&gt;
        &lt;g&gt;
            &lt;adj:connection from="add-on-save-back % 0.6, -0.05" to="subject-disk % 0.6, 1.2"/&gt;
            &lt;path class="arrow" d="M0,0 q50,10 100,0" stroke-width="3" marker-end="url(#arrowhead)"/&gt;
            &lt;g&gt;
                &lt;adj:rider at="0.1" pin="0,1"/&gt;
                &lt;adj:verticalList gap="1"/&gt;
                &lt;text&gt;can&lt;/text&gt;
                &lt;text&gt;save&lt;/text&gt;
                &lt;text&gt;back&lt;/text&gt;
            &lt;/g&gt;
        &lt;/g&gt;
        &lt;g&gt;
            &lt;adj:connection from="subject-author % 0.0, -0.2" to="subject-editor % 1.2, 1.0"/&gt;
            &lt;path class="arrow" d="M0,0 q50,10 100,0" stroke-width="3" marker-end="url(#arrowhead)"/&gt;
            &lt;g&gt;
                &lt;adj:rider at="0.4" pin="0,1.1"/&gt;
                &lt;adj:verticalList gap="1"/&gt;
                &lt;text&gt;edits&lt;/text&gt;
            &lt;/g&gt;
        &lt;/g&gt;
        &lt;g&gt;
            &lt;adj:connection from="subject-author % 0.0, 1.2" to="subject-firefox % 1.05, 0.0"/&gt;
            &lt;path class="arrow" d="M0,0 q70,-30 100,0" stroke-width="3" marker-end="url(#arrowhead)"/&gt;
            &lt;g&gt;
                &lt;adj:rider at="0.4" pin="-0.1,0"/&gt;
                &lt;adj:verticalList gap="1"/&gt;
                &lt;text&gt;views&lt;/text&gt;
            &lt;/g&gt;
        &lt;/g&gt;
    &lt;/g&gt;
&lt;/svg&gt;</pre>

<h4 id="L5412">1.27.2. Example File 002</h4>

<p>An example:</p>
<img alt="example image 002" src="adj-ex-042-image.svg"
style="max-width:95%;max-height:auto;"></img> 

<h4 id="L1730">1.27.3. Example File 003</h4>

<p>An example:</p>
<img alt="example image 003" src="adj-ex-043-image.svg"
style="max-width:95%;max-height:auto;"></img> 

<h4 id="L5916">1.27.4. Example File 004</h4>

<p>An example:</p>
<img alt="example image 004" src="adj-ex-044-image.svg"
style="max-width:95%;max-height:auto;"></img> </body>
</html>
